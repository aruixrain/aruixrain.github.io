<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/doc/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html"><meta property="og:title" content="JVMå†…å­˜ç®¡ç†"><meta property="og:description" content="JVMå†…å­˜ç®¡ç† åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬äº†è§£äº†JVMçš„å¤§è‡´è¿ä½œåŸç†ä»¥åŠç›¸å…³ç‰¹æ€§ï¼Œè¿™ä¸€ç« ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šä»å†…å­˜ç®¡ç†è¯´èµ·ã€‚ åœ¨ä¼ ç»Ÿçš„C/C++å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é€šè¿‡ä½¿ç”¨ç”³è¯·å†…å­˜çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡æˆ–æ˜¯å­˜æ”¾æŸäº›æ•°æ®ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿå¸¦æ¥äº†ä¸€äº›é¢å¤–çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¦åœ¨ä½•æ—¶é‡Šæ”¾è¿™äº›å†…å­˜ï¼Œæ€ä¹ˆæ‰èƒ½ä½¿å¾—å†…å­˜çš„ä½¿ç”¨æœ€é«˜æ•ˆï¼Œå› æ­¤ï¼Œå†…å­˜ç®¡ç†æ˜¯ä¸€ä¸ªéå¸¸ä¸¥è‚ƒçš„é—®é¢˜ã€‚ æ¯”å¦‚æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Cè¯­è¨€åŠ¨æ€ç”³è¯·å†…å­˜ï¼Œå¹¶..."><meta property="og:type" content="article"><meta property="og:image" content="https://s2.loli.net/2023/03/06/CP4yv1iqrfjmXzW.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-09-07T06:25:31.000Z"><meta property="article:author" content="Cotton Eye Joe"><meta property="article:modified_time" content="2024-09-07T06:25:31.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"JVMå†…å­˜ç®¡ç†","image":["https://s2.loli.net/2023/03/06/CP4yv1iqrfjmXzW.jpg","https://s2.loli.net/2023/03/06/As1NGy6BwhKJ9kY.png","https://s2.loli.net/2023/03/06/rRtxbFZXDkmGci4.png","https://s2.loli.net/2023/03/06/SZJWH8l5xByTjr7.png","https://s2.loli.net/2023/03/06/FdS8U4lHVjCLKwD.png","https://s2.loli.net/2023/03/06/FBpxKWIbuY7ftq4.png","https://s2.loli.net/2023/03/06/vYL53rtIDAWcQhb.png","https://s2.loli.net/2023/03/06/tnqFSxzEcB4U9WL.png","https://s2.loli.net/2023/03/06/GTgbpIYdCyK3RLj.png","https://s2.loli.net/2023/03/06/EOC5ilkr396BHNy.png","https://s2.loli.net/2023/03/06/2fXENphit4OZvVk.png","https://s2.loli.net/2023/03/06/r5IsmTk3DZfXA26.png","https://s2.loli.net/2023/03/06/C71bdyIY2JVpLKz.png","https://s2.loli.net/2023/03/06/stqTu8gD3ykixva.png","https://s2.loli.net/2023/03/06/4MIORcEDzquZFia.png","https://s2.loli.net/2023/03/06/WYSGI5xCh8mOBcK.png","https://s2.loli.net/2023/03/06/48ZguJqIK6ojEba.png","https://s2.loli.net/2023/03/06/KdZpLNTzEitCOB3.png","https://s2.loli.net/2023/03/06/8sSvloxtKINFYz4.png","https://s2.loli.net/2023/03/06/OZrKbUm39lfaAgv.png","https://s2.loli.net/2023/03/06/lENKm3CMuxk1JFI.png","https://s2.loli.net/2023/03/06/xU6LY3nDukNg2rv.png","https://s2.loli.net/2023/03/06/NeGcYPwDOkdjVfq.png","https://s2.loli.net/2023/03/06/iWqvCUySGk8Qlad.png","https://s2.loli.net/2023/03/06/71PqlEfiGgBSLae.png","https://s2.loli.net/2023/03/06/d8anmBcLrW3iyJl.png","https://s2.loli.net/2023/03/06/JeifGj6kmVAY2PR.png","https://s2.loli.net/2023/03/06/4UncSVvO1P2xWKL.png","https://s2.loli.net/2023/03/06/v79TEdmyo1njKwl.png","https://s2.loli.net/2023/03/06/tQwzAK1XU5gdl8Y.png","https://s2.loli.net/2023/03/06/npiZY1Q4e5EhGuB.png","https://s2.loli.net/2023/03/06/qhmndIQPKarvDso.png","https://s2.loli.net/2023/03/06/yHxXZP92DKc5Qre.png","https://s2.loli.net/2023/03/06/kXRMlt5iFDvjq8y.png","https://s2.loli.net/2023/03/06/2RD3AnPvbh1lQ5N.png","https://s2.loli.net/2023/03/06/iVcYMU9jdn2NC6Z.png"],"dateModified":"2024-09-07T06:25:31.000Z","author":[{"@type":"Person","name":"Cotton Eye Joe","url":"https://github.com/ToDreamr"}]}</script><title>JVMå†…å­˜ç®¡ç†</title><meta name="description" content="JVMå†…å­˜ç®¡ç† åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬äº†è§£äº†JVMçš„å¤§è‡´è¿ä½œåŸç†ä»¥åŠç›¸å…³ç‰¹æ€§ï¼Œè¿™ä¸€ç« ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šä»å†…å­˜ç®¡ç†è¯´èµ·ã€‚ åœ¨ä¼ ç»Ÿçš„C/C++å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é€šè¿‡ä½¿ç”¨ç”³è¯·å†…å­˜çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡æˆ–æ˜¯å­˜æ”¾æŸäº›æ•°æ®ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿå¸¦æ¥äº†ä¸€äº›é¢å¤–çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¦åœ¨ä½•æ—¶é‡Šæ”¾è¿™äº›å†…å­˜ï¼Œæ€ä¹ˆæ‰èƒ½ä½¿å¾—å†…å­˜çš„ä½¿ç”¨æœ€é«˜æ•ˆï¼Œå› æ­¤ï¼Œå†…å­˜ç®¡ç†æ˜¯ä¸€ä¸ªéå¸¸ä¸¥è‚ƒçš„é—®é¢˜ã€‚ æ¯”å¦‚æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Cè¯­è¨€åŠ¨æ€ç”³è¯·å†…å­˜ï¼Œå¹¶...">
    <link rel="preload" href="/assets/style-CwmJ3HJv.css" as="style"><link rel="stylesheet" href="/assets/style-CwmJ3HJv.css">
    <link rel="modulepreload" href="/assets/app-7V2lPg4G.js"><link rel="modulepreload" href="/assets/å†…å­˜ç®¡ç†.html-Cb34YNfV.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/portfolio.html-CAvE7Z9N.js" as="script"><link rel="prefetch" href="/assets/index.html-C9wldKJC.js" as="script"><link rel="prefetch" href="/assets/å‹é“¾.html-BtOxmXT-.js" as="script"><link rel="prefetch" href="/assets/disable.html-B__KZUnk.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-BksT1Hmf.js" as="script"><link rel="prefetch" href="/assets/layout.html-C2JBLIlc.js" as="script"><link rel="prefetch" href="/assets/markdown.html-DXn6p_Tg.js" as="script"><link rel="prefetch" href="/assets/page.html-5BMOZX8K.js" as="script"><link rel="prefetch" href="/assets/index.html-DhCYxvEF.js" as="script"><link rel="prefetch" href="/assets/å‹é“¾.html--AwLydcX.js" as="script"><link rel="prefetch" href="/assets/index.html-DLtktf7J.js" as="script"><link rel="prefetch" href="/assets/index.html-BztLX3l1.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-Db7gYFeM.js" as="script"><link rel="prefetch" href="/assets/Redis.html-C6sbVZr4.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-SHG5Fum7.js" as="script"><link rel="prefetch" href="/assets/é«˜å¹¶å‘ç¼–ç¨‹.html-CW1WC9iw.js" as="script"><link rel="prefetch" href="/assets/JVMå†…å­˜æ¨¡å‹.html-D_SBzb_i.js" as="script"><link rel="prefetch" href="/assets/ç±»ä¸ç±»åŠ è½½.html-zYUf0gpo.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼ç³»åˆ— - è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™.html-DcdNvEra.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼ç³»åˆ— - è®¾è®¡æ¨¡å¼ï¼ˆä¸‰ï¼‰ç»“æ„å‹.html-mAPfUaId.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼ç³»åˆ— - è®¾è®¡æ¨¡å¼ï¼ˆäºŒï¼‰åˆ›å»ºå‹.html-CQTTl6Nf.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼ç³»åˆ— - è®¾è®¡æ¨¡å¼ï¼ˆå››ï¼‰è¡Œä¸ºå‹.html-DOlE4_k4.js" as="script"><link rel="prefetch" href="/assets/Cpp.html-jEQKCv3-.js" as="script"><link rel="prefetch" href="/assets/baz.html-BN_jYEfm.js" as="script"><link rel="prefetch" href="/assets/index.html-CnP8NN36.js" as="script"><link rel="prefetch" href="/assets/ray.html-C0ceSN9U.js" as="script"><link rel="prefetch" href="/assets/index.html-BZ1xjawG.js" as="script"><link rel="prefetch" href="/assets/index.html-D5pd6CAI.js" as="script"><link rel="prefetch" href="/assets/index.html-AazjbObK.js" as="script"><link rel="prefetch" href="/assets/å¹¶å‘ç¼–ç¨‹.html-SO2oxBj-.js" as="script"><link rel="prefetch" href="/assets/SpringCloud 1.html-d1C3Jruj.js" as="script"><link rel="prefetch" href="/assets/SpringCloud 2.html-BvRB1gJE.js" as="script"><link rel="prefetch" href="/assets/SpringCloud 3.html-DxhD-94A.js" as="script"><link rel="prefetch" href="/assets/index.html-phl5fAXb.js" as="script"><link rel="prefetch" href="/assets/æ•°ä¹‹å’Œ.html-C4cNb-Gd.js" as="script"><link rel="prefetch" href="/assets/æœ‰åºæ•°ç»„çš„å¹³æ–¹.html-DvRsWalr.js" as="script"><link rel="prefetch" href="/assets/ç§»é™¤å…ƒç´ .html-DKIYZU8A.js" as="script"><link rel="prefetch" href="/assets/èºæ—‹çŸ©é˜µ.html-CYz1Q5OM.js" as="script"><link rel="prefetch" href="/assets/é“¾è¡¨ç¯‡.html-QLShRSs_.js" as="script"><link rel="prefetch" href="/assets/é•¿åº¦æœ€å°çš„æ•°ç»„.html-CCUqadjp.js" as="script"><link rel="prefetch" href="/assets/index.html-OhOyJNfn.js" as="script"><link rel="prefetch" href="/assets/äºŒåˆ†æ³•.html-DJoPxb-t.js" as="script"><link rel="prefetch" href="/assets/å“ˆå¸Œç¯‡.html-CUE9cZRu.js" as="script"><link rel="prefetch" href="/assets/é“¾è¡¨.html-DJK1HdEA.js" as="script"><link rel="prefetch" href="/assets/Docker.html-CzYxJ7bb.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®ç»“æ„å›¾ç¤º.html-CUm7uHgd.js" as="script"><link rel="prefetch" href="/assets/å®ä¾‹åŒ–Node.html-D-gcaA8r.js" as="script"><link rel="prefetch" href="/assets/å¯¹è±¡é—´çš„å…³ç³».html-BYO5OdJJ.js" as="script"><link rel="prefetch" href="/assets/ThreadLocal.html-CR-NpOMl.js" as="script"><link rel="prefetch" href="/assets/å…³é”®å­—.html-CGfJEXeQ.js" as="script"><link rel="prefetch" href="/assets/404.html-GyCG4bbD.js" as="script"><link rel="prefetch" href="/assets/index.html-mNkO6SpZ.js" as="script"><link rel="prefetch" href="/assets/index.html--CLwPFXX.js" as="script"><link rel="prefetch" href="/assets/index.html-C-pptsQn.js" as="script"><link rel="prefetch" href="/assets/index.html-CgDhLFdr.js" as="script"><link rel="prefetch" href="/assets/index.html-DoOe8tuC.js" as="script"><link rel="prefetch" href="/assets/index.html-BSkFXUO7.js" as="script"><link rel="prefetch" href="/assets/index.html-A1l5oNsi.js" as="script"><link rel="prefetch" href="/assets/index.html-hTYQ5qrF.js" as="script"><link rel="prefetch" href="/assets/index.html-zUFVq1cP.js" as="script"><link rel="prefetch" href="/assets/index.html-diK-wnsX.js" as="script"><link rel="prefetch" href="/assets/index.html-CXn_7__T.js" as="script"><link rel="prefetch" href="/assets/index.html-B2BFkybs.js" as="script"><link rel="prefetch" href="/assets/index.html-XJuxdRDh.js" as="script"><link rel="prefetch" href="/assets/index.html-BTcirJ2i.js" as="script"><link rel="prefetch" href="/assets/index.html-Dqe6ocXM.js" as="script"><link rel="prefetch" href="/assets/index.html-C8Sln--0.js" as="script"><link rel="prefetch" href="/assets/index.html-2h6M3VoU.js" as="script"><link rel="prefetch" href="/assets/index.html-CbnKe6x_.js" as="script"><link rel="prefetch" href="/assets/index.html-DlqPTk40.js" as="script"><link rel="prefetch" href="/assets/index.html-KjbSCFlf.js" as="script"><link rel="prefetch" href="/assets/index.html-DBosTiSB.js" as="script"><link rel="prefetch" href="/assets/index.html-n4RJ64PH.js" as="script"><link rel="prefetch" href="/assets/index.html-c9vOdeGb.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/ç§’é€Ÿï¼•ã‚»ãƒ³ãƒãƒ¡ãƒ¼ãƒˆãƒ«.svg" alt><!----><!----></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="é›¨å±±"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-user-graduate" style=""></span><!--]-->é›¨å±±<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/portfolio.html" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/demo/" aria-label="æ–‡æ¡£å’Œç¬”è®°"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><!--]-->æ–‡æ¡£å’Œç¬”è®°<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E5%8F%8B%E9%93%BE.html" aria-label="æœ‹å‹ä»¬"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-user-graduate" style=""></span><!--]-->æœ‹å‹ä»¬<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><span class="vp-sidebar-title">åç«¯ç†è®º</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">åˆ†å¸ƒå¼</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">è®¾è®¡æ¨¡å¼</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ•°æ®åº“</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç®—æ³•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">çº¿ç¨‹æ± </span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ¶ˆæ¯é˜Ÿåˆ—</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">è™šæ‹Ÿæœº</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/doc/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E4%B8%8E%E7%B1%BB%E5%8A%A0%E8%BD%BD.html" aria-label="ç±»ä¸ç±»åŠ è½½"><!---->ç±»ä¸ç±»åŠ è½½<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/doc/%E8%99%9A%E6%8B%9F%E6%9C%BA/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.html" aria-label="èµ°è¿›JVM"><!---->èµ°è¿›JVM<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/doc/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" aria-label="JVMå†…å­˜ç®¡ç†"><!---->JVMå†…å­˜ç®¡ç†<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">è¯­è¨€åŸºç¡€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">è¿ç»´éƒ¨ç½²</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æŒ‡å¼•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-check-square" style=""></span><span class="vp-sidebar-title">å¸®åŠ©</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="auto-link external-link vp-sidebar-link" href="https://plugin-md-enhance.vuejs.press/zh/guide/content/revealjs/demo.html" aria-label="å¹»ç¯ç‰‡" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-person-chalkboard" style=""></span><!--]-->å¹»ç¯ç‰‡<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->JVMå†…å­˜ç®¡ç†</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/ToDreamr" target="_blank" rel="noopener noreferrer">Cotton Eye Joe</a></span><span property="author" content="Cotton Eye Joe"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-09-07T06:25:31.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 45 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT45M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å†…å­˜åŒºåŸŸåˆ’åˆ†">å†…å­˜åŒºåŸŸåˆ’åˆ†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¤§è‡´åˆ’åˆ†">å¤§è‡´åˆ’åˆ†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#çˆ†å†…å­˜å’Œçˆ†æ ˆ">çˆ†å†…å­˜å’Œçˆ†æ ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç”³è¯·å †å¤–å†…å­˜">ç”³è¯·å †å¤–å†…å­˜</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åƒåœ¾å›æ”¶æœºåˆ¶">åƒåœ¾å›æ”¶æœºåˆ¶</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¯¹è±¡å­˜æ´»åˆ¤å®šç®—æ³•">å¯¹è±¡å­˜æ´»åˆ¤å®šç®—æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åƒåœ¾å›æ”¶ç®—æ³•">åƒåœ¾å›æ”¶ç®—æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åƒåœ¾æ”¶é›†å™¨å®ç°">åƒåœ¾æ”¶é›†å™¨å®ç°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å…ƒç©ºé—´">å…ƒç©ºé—´</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å…¶ä»–å¼•ç”¨ç±»å‹">å…¶ä»–å¼•ç”¨ç±»å‹</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="jvmå†…å­˜ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#jvmå†…å­˜ç®¡ç†"><span>JVMå†…å­˜ç®¡ç†</span></a></h1><p>åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬äº†è§£äº†JVMçš„å¤§è‡´è¿ä½œåŸç†ä»¥åŠç›¸å…³ç‰¹æ€§ï¼Œè¿™ä¸€ç« ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šä»å†…å­˜ç®¡ç†è¯´èµ·ã€‚</p><p>åœ¨ä¼ ç»Ÿçš„C/C++å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é€šè¿‡ä½¿ç”¨ç”³è¯·å†…å­˜çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡æˆ–æ˜¯å­˜æ”¾æŸäº›æ•°æ®ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿå¸¦æ¥äº†ä¸€äº›é¢å¤–çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¦åœ¨ä½•æ—¶é‡Šæ”¾è¿™äº›å†…å­˜ï¼Œæ€ä¹ˆæ‰èƒ½ä½¿å¾—å†…å­˜çš„ä½¿ç”¨æœ€é«˜æ•ˆï¼Œå› æ­¤ï¼Œå†…å­˜ç®¡ç†æ˜¯ä¸€ä¸ªéå¸¸ä¸¥è‚ƒçš„é—®é¢˜ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Cè¯­è¨€åŠ¨æ€ç”³è¯·å†…å­˜ï¼Œå¹¶ç”¨äºå­˜æ”¾æ•°æ®ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;stdlib.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;stdio.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //åŠ¨æ€ç”³è¯·4ä¸ªintå¤§å°çš„å†…å­˜ç©ºé—´</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> memory </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> malloc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sizeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ä¿®æ”¹ç¬¬ä¸€ä¸ªintç©ºé—´çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    memory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ä¿®æ”¹ç¬¬äºŒä¸ªintç©ºé—´çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    memory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //éå†å†…å­˜åŒºåŸŸä¸­æ‰€æœ‰çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">memory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[i]);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //é‡Šæ”¾æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜åŒºåŸŸ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    free</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(memory);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //æœ€åå°†æŒ‡é’ˆèµ‹å€¼ä¸ºNULL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    memory </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œåœ¨Javaä¸­ï¼Œè¿™ç§æ“ä½œå®é™…ä¸Šæ˜¯ä¸å…è®¸çš„ï¼ŒJavaåªæ”¯æŒç›´æ¥ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹è±¡ç±»å‹ï¼Œè‡³äºå†…å­˜åˆ°åº•å¦‚ä½•åˆ†é…ï¼Œå¹¶ä¸æ˜¯ç”±æˆ‘ä»¬æ¥å¤„ç†ï¼Œè€Œæ˜¯JVMå¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ§åˆ¶ï¼Œè¿™æ ·å°±å¸®åŠ©æˆ‘ä»¬èŠ‚çœå¾ˆå¤šå†…å­˜ä¸Šçš„å·¥ä½œï¼Œè™½ç„¶å¸¦æ¥äº†å¾ˆå¤§çš„ä¾¿åˆ©ï¼Œä½†æ˜¯ï¼Œä¸€æ—¦å‡ºç°å†…å­˜é—®é¢˜ï¼Œæˆ‘ä»¬å°±æ— æ³•åƒC/C++é‚£æ ·å¯¹æ‰€ç®¡ç†çš„å†…å­˜è¿›è¡Œåˆç†åœ°å¤„ç†ï¼Œå› ä¸ºæ‰€æœ‰çš„å†…å­˜æ“ä½œéƒ½æ˜¯ç”±JVMåœ¨è¿›è¡Œï¼Œåªæœ‰äº†è§£äº†JVMçš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨å‡ºç°å†…å­˜ç›¸å…³é—®é¢˜æ—¶æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="å†…å­˜åŒºåŸŸåˆ’åˆ†" tabindex="-1"><a class="header-anchor" href="#å†…å­˜åŒºåŸŸåˆ’åˆ†"><span>å†…å­˜åŒºåŸŸåˆ’åˆ†</span></a></h2><p>æ—¢ç„¶è¦ç®¡ç†å†…å­˜ï¼Œé‚£ä¹ˆè‚¯å®šä¸ä¼šæ˜¯æ‚ä¹±æ— ç« çš„ï¼ŒJVMå¯¹å†…å­˜çš„ç®¡ç†é‡‡ç”¨çš„æ˜¯åˆ†åŒºæ²»ç†ï¼Œä¸åŒçš„å†…å­˜åŒºåŸŸæœ‰ç€å„è‡ªçš„èŒè´£æ‰€åœ¨ï¼Œåœ¨è™šæ‹Ÿæœºè¿è¡Œæ—¶ï¼Œå†…å­˜åŒºåŸŸå¦‚ä¸‹åˆ’åˆ†ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/CP4yv1iqrfjmXzW.jpg" alt="ç‚¹å‡»æŸ¥çœ‹å›¾ç‰‡æ¥æº" tabindex="0" loading="lazy"><figcaption>ç‚¹å‡»æŸ¥çœ‹å›¾ç‰‡æ¥æº</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå†…å­˜åŒºåŸŸä¸€å…±åˆ†ä¸º5ä¸ªåŒºåŸŸï¼Œå…¶ä¸­æ–¹æ³•åŒºå’Œå †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œéšç€è™šæ‹Ÿæœºçš„åˆ›å»ºè€Œåˆ›å»ºï¼Œè™šæ‹Ÿæœºçš„ç»“æŸè€Œé”€æ¯ï¼Œè€Œè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨éƒ½æ˜¯çº¿ç¨‹ä¹‹é—´ç›¸äº’éš”ç¦»çš„ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„åŒºåŸŸï¼Œå¹¶ä¸”çº¿ç¨‹å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œç»“æŸä¹‹åä¼šè‡ªåŠ¨é”€æ¯ã€‚å†…å­˜åˆ’åˆ†å®Œæˆä¹‹åï¼Œæˆ‘ä»¬çš„JVMæ‰§è¡Œå¼•æ“å’Œæœ¬åœ°åº“æ¥å£ï¼Œä¹Ÿå°±æ˜¯Javaç¨‹åºå¼€å§‹è¿è¡Œä¹‹åå°±ä¼šæ ¹æ®åˆ†åŒºåˆç†åœ°ä½¿ç”¨å¯¹åº”åŒºåŸŸçš„å†…å­˜äº†ã€‚</p><h3 id="å¤§è‡´åˆ’åˆ†" tabindex="-1"><a class="header-anchor" href="#å¤§è‡´åˆ’åˆ†"><span>å¤§è‡´åˆ’åˆ†</span></a></h3><h4 id="ç¨‹åºè®¡æ•°å™¨" tabindex="-1"><a class="header-anchor" href="#ç¨‹åºè®¡æ•°å™¨"><span>ç¨‹åºè®¡æ•°å™¨</span></a></h4><p>é¦–å…ˆæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹ç¨‹åºè®¡æ•°å™¨ï¼Œå®ƒå’Œæˆ‘ä»¬çš„ä¼ ç»Ÿ8086 CPUä¸­PCå¯„å­˜å™¨çš„å·¥ä½œå·®ä¸å¤šï¼Œå› ä¸ºJVMè™šæ‹Ÿæœºç›®çš„å°±æ˜¯å®ç°ç‰©ç†æœºé‚£æ ·çš„ç¨‹åºæ‰§è¡Œã€‚åœ¨8086 CPUä¸­ï¼ŒPCä½œä¸ºç¨‹åºè®¡æ•°å™¨ï¼Œè´Ÿè´£å‚¨å­˜å†…å­˜åœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘ä¸‹ä¸€æ¡å³å°†æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œæ¯è§£é‡Šæ‰§è¡Œå®Œä¸€æ¡æŒ‡ä»¤ï¼ŒPCå¯„å­˜å™¨çš„å€¼å°±ä¼šè‡ªåŠ¨è¢«æ›´æ–°ä¸ºä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªæŒ‡ä»¤å‘¨æœŸæ—¶ï¼Œå°±ä¼šæ ¹æ®å½“å‰åœ°å€æ‰€æŒ‡å‘çš„æŒ‡ä»¤ï¼Œè¿›è¡Œæ‰§è¡Œã€‚</p><p>è€ŒJVMä¸­çš„ç¨‹åºè®¡æ•°å™¨å¯ä»¥çœ‹åšæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œå­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ï¼Œè€Œè¡Œå·æ­£å¥½å°±æŒ‡çš„æ˜¯æŸä¸€æ¡æŒ‡ä»¤ï¼Œå­—èŠ‚ç è§£é‡Šå™¨åœ¨å·¥ä½œæ—¶ä¹Ÿä¼šæ”¹å˜è¿™ä¸ªå€¼ï¼Œæ¥æŒ‡å®šä¸‹ä¸€æ¡å³å°†æ‰§è¡Œçš„æŒ‡ä»¤ã€‚</p><p>å› ä¸ºJavaçš„å¤šçº¿ç¨‹ä¹Ÿæ˜¯ä¾é æ—¶é—´ç‰‡è½®è½¬ç®—æ³•è¿›è¡Œçš„ï¼Œå› æ­¤ä¸€ä¸ªCPUåŒä¸€æ—¶é—´ä¹Ÿåªä¼šå¤„ç†ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“æŸä¸ªçº¿ç¨‹çš„æ—¶é—´ç‰‡æ¶ˆè€—å®Œæˆåï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œè€Œå½“å‰çº¿ç¨‹çš„æ‰§è¡Œä½ç½®ä¼šè¢«ä¿å­˜åˆ°å½“å‰çº¿ç¨‹çš„ç¨‹åºè®¡æ•°å™¨ä¸­ï¼Œå½“ä¸‹æ¬¡è½®è½¬åˆ°æ­¤çº¿ç¨‹æ—¶ï¼Œåˆç»§ç»­æ ¹æ®ä¹‹å‰çš„æ‰§è¡Œä½ç½®ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</p><p>ç¨‹åºè®¡æ•°å™¨å› ä¸ºåªéœ€è¦è®°å½•å¾ˆå°‘çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åªå ç”¨å¾ˆå°‘ä¸€éƒ¨åˆ†å†…å­˜ã€‚</p><h4 id="è™šæ‹Ÿæœºæ ˆ" tabindex="-1"><a class="header-anchor" href="#è™šæ‹Ÿæœºæ ˆ"><span>è™šæ‹Ÿæœºæ ˆ</span></a></h4><p>è™šæ‹Ÿæœºæ ˆå°±æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„éƒ¨åˆ†ï¼Œçœ‹åå­—å°±çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªæ ˆç»“æ„ï¼Œæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆå…¶å®å°±æ˜¯æ ˆé‡Œé¢çš„ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œæ ˆå¸§ä¸­åŒ…æ‹¬äº†å½“å‰æ–¹æ³•çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/As1NGy6BwhKJ9kY.png" alt="image-20230306164822720" tabindex="0" loading="lazy"><figcaption>image-20230306164822720</figcaption></figure><p>å…¶ä¸­å±€éƒ¨å˜é‡è¡¨å°±æ˜¯æˆ‘ä»¬æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ï¼Œä¹‹å‰æˆ‘ä»¬ä¹Ÿè¿›è¡Œè¿‡æ¼”ç¤ºï¼Œå®é™…ä¸Šå±€éƒ¨å˜é‡è¡¨åœ¨classæ–‡ä»¶ä¸­å°±å·²ç»å®šä¹‰å¥½äº†ï¼Œæ“ä½œæ•°æ ˆå°±æ˜¯æˆ‘ä»¬ä¹‹å‰å­—èŠ‚ç æ‰§è¡Œæ—¶ä½¿ç”¨åˆ°çš„æ ˆç»“æ„ï¼› æ¯ä¸ªæ ˆå¸§è¿˜ä¿å­˜äº†ä¸€ä¸ª<strong>å¯ä»¥æŒ‡å‘å½“å‰æ–¹æ³•æ‰€åœ¨ç±»</strong>çš„è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œç›®çš„æ˜¯ï¼šå½“å‰æ–¹æ³•ä¸­å¦‚æœéœ€è¦è°ƒç”¨å…¶ä»–æ–¹æ³•çš„æ—¶å€™ï¼Œèƒ½å¤Ÿä»è¿è¡Œæ—¶å¸¸é‡æ± ä¸­æ‰¾åˆ°å¯¹åº”çš„ç¬¦å·å¼•ç”¨ï¼Œç„¶åå°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œç„¶åå°±èƒ½ç›´æ¥è°ƒç”¨å¯¹åº”æ–¹æ³•ï¼Œè¿™å°±æ˜¯åŠ¨æ€é“¾æ¥ï¼ˆæˆ‘ä»¬è¿˜æ²¡è®²åˆ°å¸¸é‡æ± ï¼Œæš‚æ—¶è®°ä½å³å¯ï¼Œå»ºè®®ä¹‹åå†å›é¡¾ä¸€ä¸‹ï¼‰ï¼Œæœ€åæ˜¯æ–¹æ³•å‡ºå£ï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•è¯¥å¦‚ä½•ç»“æŸï¼Œæ˜¯æŠ›å‡ºå¼‚å¸¸è¿˜æ˜¯æ­£å¸¸è¿”å›ã€‚</p><p>å¯èƒ½å¬èµ·æ¥æœ‰ç‚¹æ‡µé€¼ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸‹æ•´ä¸ªè™šæ‹Ÿæœºæ ˆçš„è¿ä½œæµç¨‹ï¼Œæˆ‘ä»¬å…ˆç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> res</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(res);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æˆ‘ä»¬çš„ä¸»æ–¹æ³•æ‰§è¡Œåï¼Œä¼šä¾æ¬¡æ‰§è¡Œä¸‰ä¸ªæ–¹æ³•<code>a() -&gt; b() -&gt; c() -&gt; è¿”å›</code>ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥è§‚å¯Ÿä¸€ä¸‹åç¼–è¯‘ä¹‹åçš„ç»“æœï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>  public com.test.Main();   #è¿™ä¸ªæ˜¯æ„é€ æ–¹æ³•</span></span>
<span class="line"><span>    descriptor: ()V</span></span>
<span class="line"><span>    flags: ACC_PUBLIC</span></span>
<span class="line"><span>    Code:</span></span>
<span class="line"><span>      stack=1, locals=1, args_size=1</span></span>
<span class="line"><span>         0: aload_0</span></span>
<span class="line"><span>         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span>
<span class="line"><span>         4: return</span></span>
<span class="line"><span>      LineNumberTable:</span></span>
<span class="line"><span>        line 3: 0</span></span>
<span class="line"><span>      LocalVariableTable:</span></span>
<span class="line"><span>        Start  Length  Slot  Name   Signature</span></span>
<span class="line"><span>            0       5     0  this   Lcom/test/Main;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  public static void main(java.lang.String[]);    #ä¸»æ–¹æ³•</span></span>
<span class="line"><span>    descriptor: ([Ljava/lang/String;)V</span></span>
<span class="line"><span>    flags: ACC_PUBLIC, ACC_STATIC</span></span>
<span class="line"><span>    Code:</span></span>
<span class="line"><span>      stack=2, locals=2, args_size=1</span></span>
<span class="line"><span>         0: invokestatic  #2                  // Method a:()I</span></span>
<span class="line"><span>         3: istore_1</span></span>
<span class="line"><span>         4: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;</span></span>
<span class="line"><span>         7: iload_1</span></span>
<span class="line"><span>         8: invokevirtual #4                  // Method java/io/PrintStream.println:(I)V</span></span>
<span class="line"><span>        11: return</span></span>
<span class="line"><span>      LineNumberTable:</span></span>
<span class="line"><span>        line 5: 0</span></span>
<span class="line"><span>        line 6: 4</span></span>
<span class="line"><span>        line 7: 11</span></span>
<span class="line"><span>      LocalVariableTable:</span></span>
<span class="line"><span>        Start  Length  Slot  Name   Signature</span></span>
<span class="line"><span>            0      12     0  args   [Ljava/lang/String;</span></span>
<span class="line"><span>            4       8     1   res   I</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  public static int a();</span></span>
<span class="line"><span>    descriptor: ()I</span></span>
<span class="line"><span>    flags: ACC_PUBLIC, ACC_STATIC</span></span>
<span class="line"><span>    Code:</span></span>
<span class="line"><span>      stack=1, locals=0, args_size=0</span></span>
<span class="line"><span>         0: invokestatic  #5                  // Method b:()I</span></span>
<span class="line"><span>         3: ireturn</span></span>
<span class="line"><span>      LineNumberTable:</span></span>
<span class="line"><span>        line 10: 0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  public static int b();</span></span>
<span class="line"><span>    descriptor: ()I</span></span>
<span class="line"><span>    flags: ACC_PUBLIC, ACC_STATIC</span></span>
<span class="line"><span>    Code:</span></span>
<span class="line"><span>      stack=1, locals=0, args_size=0</span></span>
<span class="line"><span>         0: invokestatic  #6                  // Method c:()I</span></span>
<span class="line"><span>         3: ireturn</span></span>
<span class="line"><span>      LineNumberTable:</span></span>
<span class="line"><span>        line 14: 0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  public static int c();</span></span>
<span class="line"><span>    descriptor: ()I</span></span>
<span class="line"><span>    flags: ACC_PUBLIC, ACC_STATIC</span></span>
<span class="line"><span>    Code:</span></span>
<span class="line"><span>      stack=2, locals=2, args_size=0</span></span>
<span class="line"><span>         0: bipush        10</span></span>
<span class="line"><span>         2: istore_0</span></span>
<span class="line"><span>         3: bipush        20</span></span>
<span class="line"><span>         5: istore_1</span></span>
<span class="line"><span>         6: iload_0</span></span>
<span class="line"><span>         7: iload_1</span></span>
<span class="line"><span>         8: iadd</span></span>
<span class="line"><span>         9: ireturn</span></span>
<span class="line"><span>      LineNumberTable:</span></span>
<span class="line"><span>        line 18: 0</span></span>
<span class="line"><span>        line 19: 3</span></span>
<span class="line"><span>        line 20: 6</span></span>
<span class="line"><span>      LocalVariableTable:</span></span>
<span class="line"><span>        Start  Length  Slot  Name   Signature</span></span>
<span class="line"><span>            3       7     0     a   I</span></span>
<span class="line"><span>            6       4     1     b   I</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°åœ¨ç¼–è¯‘ä¹‹åï¼Œæˆ‘ä»¬æ•´ä¸ªæ–¹æ³•çš„æœ€å¤§æ“ä½œæ•°æ ˆæ·±åº¦ã€å±€éƒ¨å˜é‡è¡¨éƒ½æ˜¯å·²ç»ç¡®å®šå¥½çš„ï¼Œå½“æˆ‘ä»¬ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶ï¼Œä¼šæ ¹æ®è¿™äº›ä¿¡æ¯å°è£…ä¸ºå¯¹åº”çš„æ ˆå¸§ï¼Œæˆ‘ä»¬ä»<code>main</code>æ–¹æ³•å¼€å§‹çœ‹èµ·ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/rRtxbFZXDkmGci4.png" alt="image-20230306164838564" tabindex="0" loading="lazy"><figcaption>image-20230306164838564</figcaption></figure><p>æ¥ç€æˆ‘ä»¬ç»§ç»­å¾€ä¸‹ï¼Œåˆ°äº†<code> 0: invokestatic #2 // Method a:()I</code>æ—¶ï¼Œéœ€è¦è°ƒç”¨æ–¹æ³•<code>a()</code>ï¼Œè¿™æ—¶å½“å‰æ–¹æ³•å°±ä¸ä¼šç»§ç»­å‘ä¸‹è¿è¡Œäº†ï¼Œè€Œæ˜¯å»æ‰§è¡Œæ–¹æ³•<code>a()</code>ï¼Œé‚£ä¹ˆåŒæ ·çš„ï¼Œå°†æ­¤æ–¹æ³•ä¹Ÿå…¥æ ˆï¼Œæ³¨æ„æ˜¯æ”¾å…¥åˆ°æ ˆé¡¶ä½ç½®ï¼Œ<code>main</code>æ–¹æ³•çš„æ ˆå¸§ä¼šè¢«å‹ä¸‹å»ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/SZJWH8l5xByTjr7.png" alt="image-20230306164848411" tabindex="0" loading="lazy"><figcaption>image-20230306164848411</figcaption></figure><p>è¿™æ—¶ï¼Œè¿›å…¥æ–¹æ³•aä¹‹åï¼Œåˆç»§è€Œè¿›å…¥åˆ°æ–¹æ³•bï¼Œæœ€ååœ¨è¿›å…¥cï¼Œå› æ­¤ï¼Œåˆ°è¾¾æ–¹æ³•cçš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„è™šæ‹Ÿæœºæ ˆå˜æˆäº†ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/FdS8U4lHVjCLKwD.png" alt="image-20230306164859169" tabindex="0" loading="lazy"><figcaption>image-20230306164859169</figcaption></figure><p>ç°åœ¨æˆ‘ä»¬ä¾æ¬¡æ‰§è¡Œæ–¹æ³•cä¸­çš„æŒ‡ä»¤ï¼Œæœ€åè¿”å›a+bçš„ç»“æœï¼Œåœ¨æ–¹æ³•cè¿”å›ä¹‹åï¼Œä¹Ÿå°±ä»£è¡¨æ–¹æ³•cå·²ç»æ‰§è¡Œç»“æŸäº†ï¼Œæ ˆå¸§4ä¼šè‡ªåŠ¨å‡ºæ ˆï¼Œè¿™æ—¶æ ˆå¸§3å°±å¾—åˆ°äº†ä¸Šä¸€æ ˆå¸§è¿”å›çš„ç»“æœï¼Œå¹¶ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ç”±äºç´§æ¥ç€é©¬ä¸Šå°±è¿”å›ï¼Œæ‰€ä»¥ç»§ç»­é‡å¤æ ˆå¸§4çš„æ“ä½œï¼Œæ­¤æ—¶æ ˆå¸§3ä¹Ÿå‡ºæ ˆå¹¶ç»§ç»­å°†ç»“æœäº¤ç»™ä¸‹ä¸€ä¸ªæ ˆå¸§2ï¼Œæœ€åæ ˆå¸§2å†å°†ç»“æœè¿”å›ç»™æ ˆå¸§1ï¼Œç„¶åæ ˆå¸§1å°±å¯ä»¥ç»§ç»­å‘ä¸‹è¿è¡Œäº†ï¼Œæœ€åè¾“å‡ºç»“æœã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/FBpxKWIbuY7ftq4.png" alt="image-20230306164908882" tabindex="0" loading="lazy"><figcaption>image-20230306164908882</figcaption></figure><h4 id="æœ¬åœ°æ–¹æ³•æ ˆ" tabindex="-1"><a class="header-anchor" href="#æœ¬åœ°æ–¹æ³•æ ˆ"><span>æœ¬åœ°æ–¹æ³•æ ˆ</span></a></h4><p>æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºæ ˆä½œç”¨å·®ä¸å¤šï¼Œä½†æ˜¯å®ƒ å¤‡çš„ï¼Œè¿™é‡Œä¸å¤šåšä»‹ç»ã€‚</p><h4 id="å †" tabindex="-1"><a class="header-anchor" href="#å †"><span>å †</span></a></h4><p>å †æ˜¯æ•´ä¸ªJavaåº”ç”¨ç¨‹åºå…±äº«çš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æ•´ä¸ªè™šæ‹Ÿæœºæœ€å¤§çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œè€Œæ­¤åŒºåŸŸçš„èŒè´£å°±æ˜¯å­˜æ”¾å’Œç®¡ç†å¯¹è±¡å’Œæ•°ç»„ï¼Œè€Œæˆ‘ä»¬é©¬ä¸Šè¦æåˆ°çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¹Ÿæ˜¯ä¸»è¦ä½œç”¨äºè¿™ä¸€éƒ¨åˆ†å†…å­˜åŒºåŸŸã€‚</p><h4 id="æ–¹æ³•åŒº" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•åŒº"><span>æ–¹æ³•åŒº</span></a></h4><p>æ–¹æ³•åŒºä¹Ÿæ˜¯æ•´ä¸ªJavaåº”ç”¨ç¨‹åºå…±äº«çš„åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨æ‰€æœ‰çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€åŠ¨æ€ç¼–è¯‘ç¼“å­˜ç­‰æ•°æ®ï¼Œå¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯ç±»ä¿¡æ¯è¡¨ï¼Œä¸€ä¸ªæ˜¯è¿è¡Œæ—¶å¸¸é‡æ± ã€‚æ–¹æ³•åŒºä¹Ÿæ˜¯æˆ‘ä»¬è¦é‡ç‚¹ä»‹ç»çš„éƒ¨åˆ†ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/vYL53rtIDAWcQhb.png" alt="image-20230306164925187" tabindex="0" loading="lazy"><figcaption>image-20230306164925187</figcaption></figure><p>é¦–å…ˆç±»ä¿¡æ¯è¡¨ä¸­å­˜æ”¾çš„æ˜¯å½“å‰åº”ç”¨ç¨‹åºåŠ è½½çš„æ‰€æœ‰ç±»ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰ä¿¡æ¯ï¼ŒåŒæ—¶ä¼šå°†ç¼–è¯‘æ—¶ç”Ÿæˆçš„å¸¸é‡æ± æ•°æ®å…¨éƒ¨å­˜æ”¾åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚å½“ç„¶ï¼Œå¸¸é‡ä¹Ÿå¹¶ä¸æ˜¯åªèƒ½ä»ç±»ä¿¡æ¯ä¸­è·å–ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šæœ‰æ–°çš„å¸¸é‡è¿›å…¥åˆ°å¸¸é‡æ± ã€‚</p><p>å…¶å®æˆ‘ä»¬çš„Stringç±»æ­£æ˜¯åˆ©ç”¨äº†å¸¸é‡æ± è¿›è¡Œä¼˜åŒ–ï¼Œè¿™é‡Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;abc&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str2 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;abc&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(str1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> str2);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">str1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(str2));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾—åˆ°çš„ç»“æœä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œç”±äº<code>str1</code>å’Œ<code>str2</code>æ˜¯å•ç‹¬åˆ›å»ºçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡å®é™…ä¸Šä¼šåœ¨å †ä¸­å­˜æ”¾ï¼Œä¿å­˜åœ¨ä¸åŒçš„åœ°å€ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/tnqFSxzEcB4U9WL.png" alt="image-20230306164934743" tabindex="0" loading="lazy"><figcaption>image-20230306164934743</figcaption></figure><p>æ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨<code>==</code>åˆ¤æ–­æ—¶ï¼Œå¾—åˆ°çš„ç»“æœ<code>false</code>ï¼Œè€Œä½¿ç”¨<code>equals</code>æ—¶å› ä¸ºæ¯”è¾ƒçš„æ˜¯å€¼ï¼Œæ‰€ä»¥å¾—åˆ°<code>true</code>ã€‚ç°åœ¨æˆ‘ä»¬æ¥ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;abc&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str2 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;abc&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(str1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> str2);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">str1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(str2));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨newçš„å½¢å¼ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨åŒå¼•å·åˆ›å»ºï¼Œé‚£ä¹ˆè¿™æ—¶å¾—åˆ°çš„ç»“æœå°±å˜æˆäº†ä¸¤ä¸ª<code>true</code>ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™å…¶å®æ˜¯å› ä¸ºæˆ‘ä»¬ç›´æ¥ä½¿ç”¨åŒå¼•å·èµ‹å€¼ï¼Œä¼šå…ˆåœ¨å¸¸é‡æ± ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™å°†å¼•ç”¨ç›´æ¥æŒ‡å‘è¯¥å­—ç¬¦ä¸²ï¼›è‹¥ä¸å­˜åœ¨ï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå†å°†å¼•ç”¨æŒ‡å‘è¯¥å­—ç¬¦ä¸²ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/GTgbpIYdCyK3RLj.png" alt="image-20230306164942208" tabindex="0" loading="lazy"><figcaption>image-20230306164942208</figcaption></figure><p>å®é™…ä¸Šä¸¤æ¬¡è°ƒç”¨Stringç±»çš„<code>intern()</code>æ–¹æ³•ï¼Œå’Œä¸Šé¢çš„æ•ˆæœå·®ä¸å¤šï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šå°†å †ä¸­å­—ç¬¦ä¸²å¤åˆ¶å¹¶æ”¾å…¥å¸¸é‡æ± ä¸­ï¼Œç¬¬äºŒæ¬¡é€šè¿‡æ­¤æ–¹æ³•è·å–å­—ç¬¦ä¸²æ—¶ï¼Œä¼šæŸ¥çœ‹å¸¸é‡æ± ä¸­æ˜¯å¦åŒ…å«ï¼Œå¦‚æœåŒ…å«é‚£ä¹ˆä¼šç›´æ¥è¿”å›å¸¸é‡æ± ä¸­å­—ç¬¦ä¸²çš„åœ°å€ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ä¸èƒ½ç›´æ¥å†™&quot;abc&quot;ï¼ŒåŒå¼•å·çš„å½¢å¼ï¼Œå†™äº†å°±ç›´æ¥åœ¨å¸¸é‡æ± é‡Œé¢å§abcåˆ›å¥½äº†</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ab&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;c&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str2 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ab&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;c&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">str1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> str2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">str1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(str2));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://s2.loli.net/2023/03/06/EOC5ilkr396BHNy.png" alt="image-20230306164954716" tabindex="0" loading="lazy"><figcaption>image-20230306164954716</figcaption></figure><p>æ‰€ä»¥ä¸Šè¿°ç»“æœä¸­å¾—åˆ°çš„ä¾ç„¶æ˜¯ä¸¤ä¸ª<code>true</code>ã€‚åœ¨JDK1.7ä¹‹åï¼Œç¨å¾®æœ‰ä¸€äº›åŒºåˆ«ï¼Œåœ¨è°ƒç”¨<code>intern()</code>æ–¹æ³•æ—¶ï¼Œå½“å¸¸é‡æ± ä¸­æ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ä¸²æ—¶ï¼Œä¸ä¼šå†è¿›è¡Œå¤åˆ¶æ“ä½œï¼Œè€Œæ˜¯å°†å…¶ç›´æ¥ä¿®æ”¹ä¸ºæŒ‡å‘å½“å‰å­—ç¬¦ä¸²å †ä¸­çš„çš„å¼•ç”¨ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/2fXENphit4OZvVk.png" alt="image-20230306165005169" tabindex="0" loading="lazy"><figcaption>image-20230306165005169</figcaption></figure><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  	//ä¸èƒ½ç›´æ¥å†™&quot;abc&quot;ï¼ŒåŒå¼•å·çš„å½¢å¼ï¼Œå†™äº†å°±ç›´æ¥åœ¨å¸¸é‡æ± é‡Œé¢å§abcåˆ›å¥½äº†</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ab&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;c&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">str1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> str1);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ab&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;c&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str2 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ab&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;c&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(str1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> str1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">str2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> str1);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥æœ€åæˆ‘ä»¬ä¼šå‘ç°ï¼Œ<code>str1.intern()</code>å’Œ<code>str1</code>éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œç»“æœä¸º<code>true</code>ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨JDK7ä¹‹åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä»æ–¹æ³•åŒºç§»åŠ¨åˆ°äº†å †ä¸­ã€‚</p><p>æœ€åæˆ‘ä»¬å†æ¥è¿›è¡Œä¸€ä¸ªæ€»ç»“ï¼Œå„ä¸ªå†…å­˜åŒºåŸŸçš„ç”¨é€”ï¼š</p><ul><li>ï¼ˆçº¿ç¨‹ç‹¬æœ‰ï¼‰ç¨‹åºè®¡æ•°å™¨ï¼šä¿å­˜å½“å‰ç¨‹åºçš„æ‰§è¡Œä½ç½®ã€‚</li><li>ï¼ˆçº¿ç¨‹ç‹¬æœ‰ï¼‰è™šæ‹Ÿæœºæ ˆï¼šé€šè¿‡æ ˆå¸§æ¥ç»´æŒæ–¹æ³•è°ƒç”¨é¡ºåºï¼Œå¸®åŠ©æ§åˆ¶ç¨‹åºæœ‰åºè¿è¡Œã€‚</li><li>ï¼ˆçº¿ç¨‹ç‹¬æœ‰ï¼‰æœ¬åœ°æ–¹æ³•æ ˆï¼šåŒä¸Šï¼Œä½œç”¨ä¸æœ¬åœ°æ–¹æ³•ã€‚</li><li>å †ï¼šæ‰€æœ‰çš„å¯¹è±¡å’Œæ•°ç»„éƒ½åœ¨è¿™é‡Œä¿å­˜ã€‚</li><li>æ–¹æ³•åŒºï¼šç±»ä¿¡æ¯ã€å³æ—¶ç¼–è¯‘å™¨çš„ä»£ç ç¼“å­˜ã€è¿è¡Œæ—¶å¸¸é‡æ± ã€‚</li></ul><p>å½“ç„¶ï¼Œè¿™äº›å†…å­˜åŒºåŸŸåˆ’åˆ†ä»…ä»…æ˜¯æ¦‚å¿µä¸Šçš„ï¼Œå…·ä½“çš„å®ç°è¿‡ç¨‹æˆ‘ä»¬åé¢è¿˜ä¼šæåˆ°ã€‚</p><h3 id="çˆ†å†…å­˜å’Œçˆ†æ ˆ" tabindex="-1"><a class="header-anchor" href="#çˆ†å†…å­˜å’Œçˆ†æ ˆ"><span>çˆ†å†…å­˜å’Œçˆ†æ ˆ</span></a></h3><p>å®é™…ä¸Šï¼Œåœ¨Javaç¨‹åºè¿è¡Œæ—¶ï¼Œå†…å­˜å®¹é‡ä¸å¯èƒ½æ˜¯æ— é™åˆ¶çš„ï¼Œå½“æˆ‘ä»¬çš„å¯¹è±¡åˆ›å»ºè¿‡å¤šæˆ–æ˜¯æ•°ç»„å®¹é‡è¿‡å¤§æ—¶ï¼Œå°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„å †å†…å­˜ä¸è¶³ä»¥å­˜æ”¾æ›´å¤šæ–°çš„å¯¹è±¡æˆ–æ˜¯æ•°ç»„ï¼Œè¿™æ—¶å°±ä¼šå‡ºç°é”™è¯¯ï¼Œæ¯”å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">[] a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MAX_VALUE</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæˆ‘ä»¬ç”³è¯·äº†ä¸€ä¸ªå®¹é‡ä¸º21äº¿å¤šçš„intå‹æ•°ç»„ï¼Œæ˜¾ç„¶ï¼Œå¦‚æ­¤ä¹‹å¤§çš„æ•°ç»„ä¸å¯èƒ½æ”¾åœ¨æˆ‘ä»¬çš„å †å†…å­˜ä¸­ï¼Œæ‰€ä»¥ç¨‹åºè¿è¡Œæ—¶å°±ä¼šè¿™æ ·ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> in thread </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;main&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">lang</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">OutOfMemoryError</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Requested</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> array size exceeds </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">VM</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> limit</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">	at </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">com</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">java</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå¾—åˆ°äº†ä¸€ä¸ª<code>OutOfMemoryError</code>é”™è¯¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å†…å­˜æº¢å‡ºé”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‚æ•°æ¥æ§åˆ¶å †å†…å­˜çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>-Xmsæœ€å°å€¼ -Xmxæœ€å¤§å€¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨é™åˆ¶å †å†…å­˜ä¸ºå›ºå®šå€¼1Må¤§å°ï¼Œå¹¶ä¸”åœ¨æŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸æ—¶ä¿å­˜å½“å‰çš„å†…å­˜å †è½¬å‚¨å¿«ç…§ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/r5IsmTk3DZfXA26.png" alt="image-20230306165041598" tabindex="0" loading="lazy"><figcaption>image-20230306165041598</figcaption></figure><p>æ³¨æ„å †å†…å­˜ä¸è¦è®¾ç½®å¤ªå°ï¼Œä¸ç„¶è¿è™šæ‹Ÿæœºéƒ½ä¸è¶³ä»¥å¯åŠ¨ï¼Œæ¥ç€æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªä¸€å®šä¼šå¯¼è‡´å†…å­˜æº¢å‡ºçš„ç¨‹åºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Test</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">list</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            list</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());    </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//æ— é™åˆ›å»ºTestå¯¹è±¡å¹¶ä¸¢è¿›Listä¸­</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç¨‹åºè¿è¡Œä¹‹åï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>java.lang.OutOfMemoryError: Java heap space</span></span>
<span class="line"><span>Dumping heap to java_pid35172.hprof ...</span></span>
<span class="line"><span>Heap dump file created [12895344 bytes in 0.028 secs]</span></span>
<span class="line"><span>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space</span></span>
<span class="line"><span>	at java.util.Arrays.copyOf(Arrays.java:3210)</span></span>
<span class="line"><span>	at java.util.Arrays.copyOf(Arrays.java:3181)</span></span>
<span class="line"><span>	at java.util.ArrayList.grow(ArrayList.java:267)</span></span>
<span class="line"><span>	at java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:241)</span></span>
<span class="line"><span>	at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:233)</span></span>
<span class="line"><span>	at java.util.ArrayList.add(ArrayList.java:464)</span></span>
<span class="line"><span>	at com.test.Main.main(Main.java:10)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°é”™è¯¯å‡ºç°åŸå› æ­£æ˜¯<code>Java heap space</code>ï¼Œä¹Ÿå°±æ˜¯å †å†…å­˜æ»¡äº†ï¼Œå¹¶ä¸”æ ¹æ®æˆ‘ä»¬è®¾å®šçš„VMå‚æ•°ï¼Œå †å†…å­˜ä¿å­˜äº†å¿«ç…§ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥åœ¨IDEAå†…ç½®çš„Profilerä¸­è¿›è¡ŒæŸ¥çœ‹ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/C71bdyIY2JVpLKz.png" alt="image-20230306165105858" tabindex="0" loading="lazy"><figcaption>image-20230306165105858</figcaption></figure><p>å¯ä»¥å¾ˆæ˜æ˜¾åœ°çœ‹åˆ°ï¼Œåœ¨åˆ›å»ºäº†360146ä¸ªTestå¯¹è±¡ä¹‹åï¼Œå †å†…å­˜èšŒåŸ ä½äº†ï¼Œäºæ˜¯å°±æŠ›å‡ºäº†å†…å­˜æº¢å‡ºé”™è¯¯ã€‚</p><p>æˆ‘ä»¬æ¥ç€æ¥çœ‹æ ˆæº¢å‡ºï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè™šæ‹Ÿæœºæ ˆä¼šåœ¨æ–¹æ³•è°ƒç”¨æ—¶æ’å…¥æ ˆå¸§ï¼Œé‚£ä¹ˆï¼Œè®¾æƒ³å¦‚æœå‡ºç°æ— é™é€’å½’çš„æƒ…å†µå‘¢ï¼Ÿ</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å¾ˆæ˜æ˜¾æ˜¯ä¸€ä¸ªæ°¸æ— ä¼‘æ­¢çš„ç¨‹åºï¼Œå¹¶ä¸”ä¼šä¸æ–­ç»§ç»­å‘ä¸‹è°ƒç”¨testæ–¹æ³•æœ¬èº«ï¼Œé‚£ä¹ˆæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„é€»è¾‘æ¨å¯¼ï¼Œæ— é™åœ°æ’å…¥æ ˆå¸§é‚£ä¹ˆä¸€å®šä¼šå°†è™šæ‹Ÿæœºæ ˆå¡æ»¡ï¼Œæ‰€ä»¥ï¼Œå½“æ ˆçš„æ·±åº¦å·²ç»ä¸è¶³ä»¥ç»§ç»­æ’å…¥æ ˆå¸§æ—¶ï¼Œå°±ä¼šè¿™æ ·ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Exception in thread &quot;main&quot; java.lang.StackOverflowError</span></span>
<span class="line"><span>	at com.test.Main.test(Main.java:12)</span></span>
<span class="line"><span>	at com.test.Main.test(Main.java:12)</span></span>
<span class="line"><span>	at com.test.Main.test(Main.java:12)</span></span>
<span class="line"><span>	at com.test.Main.test(Main.java:12)</span></span>
<span class="line"><span>	at com.test.Main.test(Main.java:12)</span></span>
<span class="line"><span>	at com.test.Main.test(Main.java:12)</span></span>
<span class="line"><span>	....ä»¥ä¸‹çœç•¥å¾ˆå¤šè¡Œ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ ˆæº¢å‡ºï¼Œå®ƒå’Œå †æº¢å‡ºæ¯”è¾ƒç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”±äºå®¹çº³ä¸ä¸‹æ‰å¯¼è‡´çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>-Xss</code>æ¥è®¾å®šæ ˆå®¹é‡ã€‚</p><h3 id="ç”³è¯·å †å¤–å†…å­˜" tabindex="-1"><a class="header-anchor" href="#ç”³è¯·å †å¤–å†…å­˜"><span>ç”³è¯·å †å¤–å†…å­˜</span></a></h3><p>é™¤äº†å †å†…å­˜å¯ä»¥å­˜æ”¾å¯¹è±¡æ•°æ®ä»¥å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”³è¯·å †å¤–å†…å­˜ï¼ˆç›´æ¥å†…å­˜ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸å—JVMç®¡æ§çš„å†…å­˜åŒºåŸŸï¼Œè¿™éƒ¨åˆ†åŒºåŸŸçš„å†…å­˜éœ€è¦æˆ‘ä»¬è‡ªè¡Œå»ç”³è¯·å’Œé‡Šæ”¾ï¼Œå®é™…ä¸Šæœ¬è´¨å°±æ˜¯JVMé€šè¿‡C/C++è°ƒç”¨<code>malloc</code>å‡½æ•°ç”³è¯·çš„å†…å­˜ï¼Œå½“ç„¶å¾—æˆ‘ä»¬è‡ªå·±å»é‡Šæ”¾äº†ã€‚ä¸è¿‡è™½ç„¶æ˜¯ç›´æ¥å†…å­˜ï¼Œä¸ä¼šå—åˆ°å †å†…å­˜å®¹é‡é™åˆ¶ï¼Œä½†æ˜¯ä¾ç„¶ä¼šå—åˆ°æœ¬æœºæœ€å¤§å†…å­˜çš„é™åˆ¶ï¼Œæ‰€ä»¥è¿˜æ˜¯æœ‰å¯èƒ½æŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦æåˆ°ä¸€ä¸ªå †å¤–å†…å­˜æ“ä½œç±»ï¼š<code>Unsafe</code>ï¼Œå°±åƒå®ƒçš„åå­—ä¸€æ ·ï¼Œè™½ç„¶Javaæä¾›å †å¤–å†…å­˜çš„æ“ä½œç±»ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒæ˜¯ä¸å®‰å…¨çš„ï¼Œåªæœ‰ä½ å®Œå…¨äº†è§£åº•å±‚åŸç†å¹¶ä¸”èƒ½å¤Ÿåˆç†æ§åˆ¶å †å¤–å†…å­˜ï¼Œæ‰èƒ½å®‰å…¨åœ°ä½¿ç”¨å †å¤–å†…å­˜ã€‚</p><p>æ³¨æ„è¿™ä¸ªç±»ä¸è®©æˆ‘ä»¬newï¼Œä¹Ÿæ²¡æœ‰ç›´æ¥è·å–æ–¹å¼ï¼ˆå‹æ ¹å°±æ²¡æƒ³è®©æˆ‘ä»¬ç”¨ï¼‰ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> native</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> registerNatives</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        registerNatives</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        sun</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">reflect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Reflection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerMethodsToFilter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;getUnsafe&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Unsafe</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> theUnsafe </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">CallerSensitive</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Unsafe</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUnsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">caller</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Reflection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getCallerClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">VM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isSystemDomainLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">caller</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()))</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SecurityException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Unsafe&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);   </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//ä¸æ˜¯JDKçš„ç±»ï¼Œä¸è®©ç”¨ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> theUnsafe;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå°±é€šè¿‡åå°„ç»™ä»–giaoå‡ºæ¥ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) throws IllegalAccessException {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Field</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> unsafeField </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    unsafeField</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAccessible</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Unsafe</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> unsafe </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (Unsafe) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">unsafeField</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆåŠŸæ‹¿åˆ°Unsafeç±»ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç”³è¯·å †å¤–å†…å­˜äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬ç°åœ¨æƒ³è¦ç”³è¯·ä¸€ä¸ªintå¤§å°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶åœ¨æ­¤ç©ºé—´ä¸­å­˜æ”¾ä¸€ä¸ªintç±»å‹çš„æ•°æ®ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) throws IllegalAccessException {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Field</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> unsafeField </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    unsafeField</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAccessible</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Unsafe</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> unsafe </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (Unsafe) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">unsafeField</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ç”³è¯·4å­—èŠ‚å¤§å°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶å¾—åˆ°å¯¹åº”ä½ç½®çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> address </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">allocateMemory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //åœ¨å¯¹åº”çš„åœ°å€ä¸Šè®¾å®šintçš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">putInt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(address, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6666666</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //è·å–å¯¹åº”åœ°å€ä¸Šçš„Intå‹æ•°å€¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getInt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(address));</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //é‡Šæ”¾ç”³è¯·åˆ°çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">freeMemory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(address);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ç”±äºå†…å­˜å·²ç»é‡Šæ”¾ï¼Œè¿™æ—¶æ•°æ®å°±æ²¡äº†</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">unsafe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getInt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(address));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸‹<code>allocateMemory</code>åº•å±‚æ˜¯å¦‚ä½•è°ƒç”¨çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹C++æºç ï¼š</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" data-title="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">UNSAFE_ENTRY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(jlong, </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Unsafe_AllocateMemory0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(JNIEnv </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">env, jobject unsafe, jlong size)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  size_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sz </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">size_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)size;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  sz </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> align_up</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sz, HeapWordSize);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  void</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> x </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">malloc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sz, mtOther);</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">   //è¿™é‡Œè°ƒç”¨äº†os::mallocæ–¹æ³•</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> addr_to_java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(x);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} UNSAFE_END</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€æ¥çœ‹ï¼š</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" data-title="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> os</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">malloc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">size_t</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MEMFLAGS</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> flags</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">malloc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(size, flags, CALLER_PC);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> os</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">malloc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">size_t</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MEMFLAGS</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> memflags</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> NativeCallStack</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> stack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	...</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  u_char</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ptr;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ptr </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">u_char</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">malloc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(alloc_size);</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">   //è°ƒç”¨C++æ ‡å‡†åº“å‡½æ•° malloc(size)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	....</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // we do not track guard memory</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> MemTracker::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">record_malloc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((address)ptr, size, memflags, stack, level);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸Šé¢çš„Javaä»£ç è½¬æ¢ä¸ºCä»£ç ï¼Œå·®ä¸å¤šå°±æ˜¯è¿™ä¸ªæ„æ€ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;stdlib.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;stdio.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> malloc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sizeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">a </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6666666</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">a);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    free</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(a);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">a);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥è¯´ï¼Œç›´æ¥å†…å­˜å®é™…ä¸Šå°±æ˜¯JVMç”³è¯·çš„ä¸€å—é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯å®ƒå¹¶ä¸åœ¨å—ç®¡æ§çš„å‡ ç§å†…å­˜ç©ºé—´ä¸­ï¼Œå½“ç„¶è¿™äº›å†…å­˜ä¾ç„¶å±äºæ˜¯JVMçš„ï¼Œç”±äºJVMæä¾›çš„å †å†…å­˜ä¼šè¿›è¡Œåƒåœ¾å›æ”¶ç­‰å·¥ä½œï¼Œæ•ˆç‡ä¸å¦‚ç›´æ¥ç”³è¯·å’Œæ“ä½œå†…å­˜æ¥å¾—å¿«ï¼Œä¸€äº›æ¯”è¾ƒè¿½æ±‚æè‡´æ€§èƒ½çš„æ¡†æ¶ä¼šç”¨åˆ°å †å¤–å†…å­˜æ¥æå‡è¿è¡Œé€Ÿåº¦ï¼Œå¦‚nioæ¡†æ¶ã€‚</p><p>å½“ç„¶ï¼ŒUnsafeç±»ä¸ä»…ä»…åªæ˜¯è¿™äº›åŠŸèƒ½ï¼Œåœ¨å…¶ä»–ç³»åˆ—è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šè®²åˆ°å®ƒã€‚</p><hr><h2 id="åƒåœ¾å›æ”¶æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾å›æ”¶æœºåˆ¶"><span>åƒåœ¾å›æ”¶æœºåˆ¶</span></a></h2><p><strong>æ³¨æ„ï¼š</strong> æ­¤éƒ¨åˆ†ä¸ºé‡ç‚¹å†…å®¹ã€‚</p><p>æˆ‘ä»¬å‰é¢æåˆ°ï¼ŒJavaä¼šè‡ªåŠ¨ç®¡ç†å’Œé‡Šæ”¾å†…å­˜ï¼Œå®ƒä¸åƒC/C++é‚£æ ·è¦æ±‚æˆ‘ä»¬æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼ŒJVMæä¾›äº†ä¸€å¥—å…¨è‡ªåŠ¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå½“ä¸€ä¸ªJavaå¯¹è±¡ä¸å†ç”¨åˆ°æ—¶ï¼ŒJVMä¼šè‡ªåŠ¨å°†å…¶è¿›è¡Œå›æ”¶å¹¶é‡Šæ”¾å†…å­˜ï¼Œé‚£ä¹ˆå¯¹è±¡æ‰€å å†…å­˜åœ¨ä»€ä¹ˆæ—¶å€™è¢«å›æ”¶ï¼Œå¦‚ä½•åˆ¤å®šå¯¹è±¡å¯ä»¥è¢«å›æ”¶ï¼Œä»¥åŠå¦‚ä½•å»è¿›è¡Œå›æ”¶å·¥ä½œä¹Ÿæ˜¯JVMéœ€è¦å…³æ³¨çš„é—®é¢˜ã€‚</p><h3 id="å¯¹è±¡å­˜æ´»åˆ¤å®šç®—æ³•" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡å­˜æ´»åˆ¤å®šç®—æ³•"><span>å¯¹è±¡å­˜æ´»åˆ¤å®šç®—æ³•</span></a></h3><p>é¦–å…ˆæˆ‘ä»¬æ¥å¥—è®¨è®ºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ï¼šå¯¹è±¡åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥è¢«åˆ¤å®šä¸ºä¸å†ä½¿ç”¨å·²ç»å¯ä»¥å›æ”¶äº†ï¼Ÿè¿™é‡Œå°±éœ€è¦æåˆ°ä»¥ä¸‹å‡ ç§åƒåœ¾å›æ”¶ç®—æ³•äº†ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/stqTu8gD3ykixva.png" alt="image-20230306165128192" tabindex="0" loading="lazy"><figcaption>image-20230306165128192</figcaption></figure><h4 id="å¼•ç”¨è®¡æ•°æ³•" tabindex="-1"><a class="header-anchor" href="#å¼•ç”¨è®¡æ•°æ³•"><span>å¼•ç”¨è®¡æ•°æ³•</span></a></h4><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœæˆ‘ä»¬è¦ç»å¸¸æ“ä½œä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆé¦–å…ˆä¸€å®šä¼šåˆ›å»ºä¸€ä¸ªå¼•ç”¨å˜é‡ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//strå°±æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œå®ƒæŒæœ‰å¯¹åé¢å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯ä»¥ä»£è¡¨åé¢è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡æœ¬èº«</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> str </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;lbwnb&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//str.xxxxx...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œåªè¦ä¸€ä¸ªå¯¹è±¡è¿˜æœ‰ä½¿ç”¨ä»·å€¼ï¼Œæˆ‘ä»¬å°±ä¼šé€šè¿‡å®ƒçš„å¼•ç”¨å˜é‡æ¥è¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆå¯å¦è¿™æ ·åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¿˜éœ€è¦è¢«ä½¿ç”¨ï¼š</p><ul><li>æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ª <strong>å¼•ç”¨è®¡æ•°å™¨</strong>ï¼Œç”¨äºå­˜æ”¾å¼•ç”¨è®¡æ•°ï¼ˆå…¶å®å°±æ˜¯å­˜æ”¾è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼‰</li><li>æ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹å¼•ç”¨æ­¤å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è®¡æ•°<code>+1</code></li><li>å½“å¼•ç”¨å¤±æ•ˆï¼ˆ æ¯”å¦‚ç¦»å¼€äº†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæˆ–æ˜¯å¼•ç”¨è¢«è®¾å®šä¸º<code>null</code>ï¼‰æ—¶ï¼Œå¼•ç”¨è®¡æ•°<code>-1</code></li><li>å½“å¼•ç”¨è®¡æ•°ä¸º<code>0</code>æ—¶ï¼Œè¡¨ç¤ºæ­¤å¯¹è±¡ä¸å¯èƒ½å†è¢«ä½¿ç”¨ï¼Œå› ä¸ºè¿™æ—¶æˆ‘ä»¬å·²ç»æ²¡æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥å¾—åˆ°æ­¤å¯¹è±¡çš„å¼•ç”¨äº†</li></ul><p>ä½†æ˜¯è¿™æ ·å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨å‘¢ï¼Ÿ</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Test</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Test</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">another</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">another</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //è¿™é‡Œç›´æ¥æŠŠaå’Œbèµ‹å€¼ä¸ºnullï¼Œè¿™æ ·å‰é¢çš„ä¸¤ä¸ªå¯¹è±¡æˆ‘ä»¬ä¸å¯èƒ½å†å¾—åˆ°äº†</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Test</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> another</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŒ‰ç…§å¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œé‚£ä¹ˆå½“å‡ºç°ä»¥ä¸Šæƒ…å†µæ—¶ï¼Œè™½ç„¶æˆ‘ä»¬æ— æ³•åœ¨å¾—åˆ°æ­¤å¯¹è±¡çš„å¼•ç”¨äº†ï¼Œå¹¶ä¸”æ­¤å¯¹è±¡æˆ‘ä»¬ä¹Ÿæ— éœ€å†ä½¿ç”¨ï¼Œä½†æ˜¯ç”±äºè¿™ä¸¤ä¸ªå¯¹è±¡ç›´æ¥å­˜åœ¨ç›¸äº’å¼•ç”¨çš„æƒ…å†µï¼Œé‚£ä¹ˆå¼•ç”¨è®¡æ•°å™¨çš„å€¼å°†ä¼šæ°¸è¿œæ˜¯<code>1</code>ï¼Œä½†æ˜¯å®é™…ä¸Šæ­¤å¯¹è±¡å·²ç»æ²¡æœ‰ä»»ä½•ç”¨é€”äº†ã€‚æ‰€ä»¥å¼•ç”¨è®¡æ•°æ³•å¹¶ä¸æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><h4 id="å¯è¾¾æ€§åˆ†æç®—æ³•" tabindex="-1"><a class="header-anchor" href="#å¯è¾¾æ€§åˆ†æç®—æ³•"><span>å¯è¾¾æ€§åˆ†æç®—æ³•</span></a></h4><p>ç›®å‰æ¯”è¾ƒä¸»æµçš„ç¼–ç¨‹è¯­è¨€ï¼ˆåŒ…æ‹¬Javaï¼‰ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ï¼Œå®ƒé‡‡ç”¨äº†ç±»ä¼¼äºæ ‘ç»“æ„çš„æœç´¢æœºåˆ¶ã€‚</p><p>é¦–å…ˆæ¯ä¸ªå¯¹è±¡çš„å¼•ç”¨éƒ½æœ‰æœºä¼šæˆä¸ºæ ‘çš„æ ¹èŠ‚ç‚¹ï¼ˆGC Rootsï¼‰ï¼Œå¯ä»¥è¢«é€‰å®šä½œä¸ºæ ¹èŠ‚ç‚¹æ¡ä»¶å¦‚ä¸‹ï¼š</p><ul><li>ä½äºè™šæ‹Ÿæœºæ ˆçš„æ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ä¸­æ‰€å¼•ç”¨åˆ°çš„å¯¹è±¡ï¼ˆå…¶å®å°±æ˜¯æˆ‘ä»¬æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ï¼‰åŒæ ·ä¹ŸåŒ…æ‹¬æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIå¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>ç±»çš„é™æ€æˆå‘˜å˜é‡å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æ–¹æ³•åŒºä¸­ï¼Œå¸¸é‡æ± é‡Œé¢å¼•ç”¨çš„å¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰æåˆ°çš„<code>String</code>ç±»å‹å¯¹è±¡ã€‚</li><li>è¢«æ·»åŠ äº†é”çš„å¯¹è±¡ï¼ˆæ¯”å¦‚synchronizedå…³é”®å­—ï¼‰</li><li>è™šæ‹Ÿæœºå†…éƒ¨éœ€è¦ç”¨åˆ°çš„å¯¹è±¡ã€‚</li></ul><figure><img src="https://s2.loli.net/2023/03/06/4MIORcEDzquZFia.png" alt="image-20230306165140204" tabindex="0" loading="lazy"><figcaption>image-20230306165140204</figcaption></figure><p>ä¸€æ—¦å·²ç»å­˜åœ¨çš„æ ¹èŠ‚ç‚¹ä¸æ»¡è¶³å­˜åœ¨çš„æ¡ä»¶æ—¶ï¼Œé‚£ä¹ˆæ ¹èŠ‚ç‚¹ä¸å¯¹è±¡ä¹‹é—´çš„è¿æ¥å°†è¢«æ–­å¼€ã€‚æ­¤æ—¶è™½ç„¶å¯¹è±¡1ä»å­˜åœ¨å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼Œä½†æ˜¯ç”±äºå…¶æ²¡æœ‰ä»»ä½•æ ¹èŠ‚ç‚¹å¼•ç”¨ï¼Œæ‰€ä»¥æ­¤å¯¹è±¡å³å¯è¢«åˆ¤å®šä¸ºä¸å†ä½¿ç”¨ã€‚æ¯”å¦‚æŸä¸ªæ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡å¼•ç”¨ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå®Œæˆè¿”å›ä¹‹åï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/WYSGI5xCh8mOBcK.png" alt="image-20230306165153841" tabindex="0" loading="lazy"><figcaption>image-20230306165153841</figcaption></figure><p>è¿™æ ·å°±èƒ½å¾ˆå¥½åœ°è§£å†³æˆ‘ä»¬åˆšåˆšæåˆ°çš„å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œæˆ‘ä»¬å†æ¥é‡ç°ä¸€ä¸‹å‡ºç°å¾ªç¯å¼•ç”¨çš„æƒ…å†µï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/48ZguJqIK6ojEba.png" alt="image-20230306165211604" tabindex="0" loading="lazy"><figcaption>image-20230306165211604</figcaption></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹è±¡1å’Œå¯¹è±¡2ä¾ç„¶æ˜¯å­˜åœ¨å¾ªç¯å¼•ç”¨çš„ï¼Œä½†æ˜¯åªæœ‰ä»–ä»¬å„è‡ªçš„GC Rootsæ–­å¼€ï¼Œé‚£ä¹ˆå°±ä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/KdZpLNTzEitCOB3.png" alt="image-20230306165225991" tabindex="0" loading="lazy"><figcaption>image-20230306165225991</figcaption></figure><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬æœ€åè¿›è¡Œä¸€ä¸‹æ€»ç»“ï¼šå¦‚æœæŸä¸ªå¯¹è±¡æ— æ³•åˆ°è¾¾ä»»ä½•GC Rootsï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„ã€‚</p><h4 id="æœ€ç»ˆåˆ¤å®š" tabindex="-1"><a class="header-anchor" href="#æœ€ç»ˆåˆ¤å®š"><span>æœ€ç»ˆåˆ¤å®š</span></a></h4><p>è™½ç„¶åœ¨ç»å†äº†å¯è¾¾æ€§åˆ†æç®—æ³•ä¹‹ååŸºæœ¬å¯èƒ½åˆ¤å®šå“ªäº›å¯¹è±¡èƒ½å¤Ÿè¢«å›æ”¶ï¼Œä½†æ˜¯å¹¶ä¸ä»£è¡¨æ­¤å¯¹è±¡ä¸€å®šä¼šè¢«å›æ”¶ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥åœ¨æœ€ç»ˆåˆ¤å®šé˜¶æ®µå¯¹å…¶è¿›è¡ŒæŒ½ç•™ã€‚</p><p>è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰åœ¨è®²è§£<code>Object</code>ç±»æ—¶æåˆ°çš„<code>finalize()</code>æ–¹æ³•å—ï¼Ÿ</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * Called by the garbage collector on an object when garbage collection</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * determines that there are no more references to the object.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * A subclass overrides the {@code finalize} method to dispose of</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * system resources or to perform other cleanup.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * ...</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> finalize</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() throws Throwable { }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ–¹æ³•æ­£æ˜¯æœ€ç»ˆåˆ¤å®šæ–¹æ³•ï¼Œå¦‚æœå­ç±»é‡å†™äº†æ­¤æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»å¯¹è±¡åœ¨è¢«åˆ¤å®šä¸ºå¯å›æ”¶æ—¶ï¼Œä¼šè¿›è¡ŒäºŒæ¬¡ç¡®è®¤ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ<code>finalize()</code>æ–¹æ³•ï¼Œè€Œåœ¨æ­¤æ–¹æ³•ä¸­ï¼Œå½“å‰å¯¹è±¡æ˜¯å®Œå…¨æœ‰å¯èƒ½é‡æ–°å»ºç«‹GC Rootsçš„ï¼æ‰€ä»¥ï¼Œå¦‚æœåœ¨äºŒæ¬¡ç¡®è®¤åå¯¹è±¡ä¸æ»¡è¶³å¯å›æ”¶çš„æ¡ä»¶ï¼Œé‚£ä¹ˆæ­¤å¯¹è±¡ä¸ä¼šè¢«å›æ”¶ï¼Œå·§å¦™åœ°é€ƒè¿‡äº†åƒåœ¾å›æ”¶çš„å‘½è¿ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Test</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> InterruptedException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //è¿™é‡Œç›´æ¥æŠŠaèµ‹å€¼ä¸ºnullï¼Œè¿™æ ·å‰é¢çš„å¯¹è±¡æˆ‘ä»¬ä¸å¯èƒ½å†å¾—åˆ°äº†</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        a  </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //æ‰‹åŠ¨ç”³è¯·æ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œï¼ˆæ³¨æ„åªæ˜¯ç”³è¯·ï¼Œå¹¶ä¸ä¸€å®šä¼šæ‰§è¡Œï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šæ‰§è¡Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //ç­‰åƒåœ¾å›æ”¶ä¸€ä¸‹()</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //æˆ‘ä»¬æ¥çœ‹çœ‹aæœ‰æ²¡æœ‰è¢«å›æ”¶</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(a);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> finalize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot; å¼€å§‹äº†å®ƒçš„æ•‘èµä¹‹è·¯ï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„<code>finalize()</code>æ–¹æ³•å¹¶ä¸æ˜¯åœ¨ä¸»çº¿ç¨‹è°ƒç”¨çš„ï¼Œè€Œæ˜¯è™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„<code>Finalizer</code>çº¿ç¨‹ï¼ˆæ­£æ˜¯å› ä¸ºä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œæ‰€ä»¥å‰é¢æ‰éœ€è¦ç­‰å¾…1ç§’é’Ÿï¼‰è¿›è¡Œå¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥ç¨å¾®ä¿®æ”¹ä¸€ä¸‹çœ‹çœ‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> finalize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Thread[Finalizer,8,system]</span></span>
<span class="line"><span>com.test.Main$Test@232204a1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒæ—¶ï¼ŒåŒä¸€ä¸ªå¯¹è±¡çš„<code>finalize()</code>æ–¹æ³•åªä¼šæœ‰ä¸€æ¬¡è°ƒç”¨æœºä¼šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬è¿ç»­ä¸¤æ¬¡è¿™æ ·æ“ä½œï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡ï¼Œå¯¹è±¡å¿…å®šè¢«å›æ”¶ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] args) throws InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //è¿™é‡Œç›´æ¥æŠŠaèµ‹å€¼ä¸ºnullï¼Œè¿™æ ·å‰é¢çš„å¯¹è±¡æˆ‘ä»¬ä¸å¯èƒ½å†å¾—åˆ°äº†</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    a  </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //æ‰‹åŠ¨ç”³è¯·æ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œï¼ˆæ³¨æ„åªæ˜¯ç”³è¯·ï¼Œå¹¶ä¸ä¸€å®šä¼šæ‰§è¡Œï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šæ‰§è¡Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ç­‰åƒåœ¾å›æ”¶ä¸€ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(a);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //è¿™é‡Œç›´æ¥æŠŠaèµ‹å€¼ä¸ºnullï¼Œè¿™æ ·å‰é¢çš„å¯¹è±¡æˆ‘ä»¬ä¸å¯èƒ½å†å¾—åˆ°äº†</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    a  </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //æ‰‹åŠ¨ç”³è¯·æ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œï¼ˆæ³¨æ„åªæ˜¯ç”³è¯·ï¼Œå¹¶ä¸ä¸€å®šä¼šæ‰§è¡Œï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šæ‰§è¡Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ç­‰åƒåœ¾å›æ”¶ä¸€ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(a);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶ï¼Œ<code>finalize()</code>æ–¹æ³•ä¹Ÿå¹¶ä¸æ˜¯ä¸“é—¨é˜²æ­¢å¯¹è±¡è¢«å›æ”¶çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥é‡Šæ”¾ä¸€äº›ç¨‹åºä½¿ç”¨ä¸­çš„èµ„æºç­‰ã€‚</p><p>æœ€åï¼Œæ€»ç»“æˆä¸€å¼ å›¾ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/8sSvloxtKINFYz4.png" alt="image-20230306165250173" tabindex="0" loading="lazy"><figcaption>image-20230306165250173</figcaption></figure><p>å½“ç„¶ï¼Œé™¤äº†å †ä¸­çš„å¯¹è±¡ä»¥å¤–ï¼Œæ–¹æ³•åŒºä¸­çš„æ•°æ®ä¹Ÿæ˜¯å¯ä»¥è¢«åƒåœ¾å›æ”¶çš„ï¼Œä½†æ˜¯å›æ”¶æ¡ä»¶æ¯”è¾ƒä¸¥æ ¼ï¼Œè¿™é‡Œå°±æš‚æ—¶ä¸è°ˆäº†ã€‚</p><hr><h3 id="åƒåœ¾å›æ”¶ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾å›æ”¶ç®—æ³•"><span>åƒåœ¾å›æ”¶ç®—æ³•</span></a></h3><p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†å¯¹è±¡å­˜æ´»åˆ¤å®šç®—æ³•ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥å‡†ç¡®åœ°çŸ¥é“å †ä¸­çš„å“ªäº›å¯¹è±¡å¯ä»¥è¢«å›æ”¶äº†ï¼Œé‚£ä¹ˆï¼Œæ¥ä¸‹æ¥å°±è¯¥è€ƒè™‘å¦‚ä½•å¯¹å¯¹è±¡è¿›è¡Œå›æ”¶äº†ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šä¸å®šæœŸåœ°æ£€æŸ¥å †ä¸­çš„å¯¹è±¡ï¼ŒæŸ¥çœ‹å®ƒä»¬æ˜¯å¦æ»¡è¶³è¢«å›æ”¶çš„æ¡ä»¶ã€‚æˆ‘ä»¬è¯¥å¦‚ä½•å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œæ˜¯ä¸€ä¸ªä¸€ä¸ªåˆ¤æ–­æ˜¯å¦éœ€è¦å›æ”¶å—ï¼Ÿ</p><h4 id="åˆ†ä»£æ”¶é›†æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#åˆ†ä»£æ”¶é›†æœºåˆ¶"><span>åˆ†ä»£æ”¶é›†æœºåˆ¶</span></a></h4><p>å®é™…ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å¯¹å †ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¾æ¬¡åˆ¤æ–­æ˜¯å¦éœ€è¦å›æ”¶ï¼Œè¿™æ ·çš„æ•ˆç‡å…¶å®æ˜¯å¾ˆä½çš„ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½åœ°å›æ”¶æœºåˆ¶å‘¢ï¼Ÿç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å †ä¸­çš„å¯¹è±¡è¿›è¡Œåˆ†ä»£ç®¡ç†ã€‚</p><p>æ¯”å¦‚æŸäº›å¯¹è±¡ï¼Œåœ¨å¤šæ¬¡åƒåœ¾å›æ”¶æ—¶ï¼Œéƒ½æœªè¢«åˆ¤å®šä¸ºå¯å›æ”¶å¯¹è±¡ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†è¿™ä¸€éƒ¨åˆ†å¯¹è±¡æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶è®©åƒåœ¾æ”¶é›†å™¨å‡å°‘å›æ”¶æ­¤åŒºåŸŸå¯¹è±¡çš„é¢‘ç‡ï¼Œè¿™æ ·å°±èƒ½å¾ˆå¥½åœ°æé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡äº†ã€‚</p><p>å› æ­¤ï¼ŒJavaè™šæ‹Ÿæœºå°†å †å†…å­˜åˆ’åˆ†ä¸º<strong>æ–°ç”Ÿä»£</strong>ã€<strong>è€å¹´ä»£</strong>å’Œ<strong>æ°¸ä¹…ä»£</strong>ï¼ˆå…¶ä¸­æ°¸ä¹…ä»£æ˜¯HotSpotè™šæ‹Ÿæœºç‰¹æœ‰çš„æ¦‚å¿µï¼Œåœ¨JDK8ä¹‹å‰æ–¹æ³•åŒºå®é™…ä¸Šå°±æ˜¯é‡‡ç”¨çš„æ°¸ä¹…ä»£ä½œä¸ºå®ç°ï¼Œè€Œåœ¨JDK8ä¹‹åï¼Œæ–¹æ³•åŒºç”±å…ƒç©ºé—´å®ç°ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯æœ¬åœ°å†…å­˜ï¼Œå®¹é‡å¤§å°å–å†³äºç‰©ç†æœºå®é™…å¤§å°ï¼Œä¹‹åä¼šè¯¦ç»†ä»‹ç»ï¼‰è¿™é‡Œæˆ‘ä»¬ä¸»è¦è®¨è®ºçš„æ˜¯<strong>æ–°ç”Ÿä»£</strong>å’Œ<strong>è€å¹´ä»£</strong>ã€‚</p><p>ä¸åŒçš„åˆ†ä»£å†…å­˜å›æ”¶æœºåˆ¶ä¹Ÿå­˜åœ¨ä¸€äº›ä¸åŒä¹‹å¤„ï¼Œåœ¨HotSpotè™šæ‹Ÿæœºä¸­ï¼Œæ–°ç”Ÿä»£è¢«åˆ’åˆ†ä¸ºä¸‰å—ï¼Œä¸€å—è¾ƒå¤§çš„Edenç©ºé—´å’Œä¸¤å—è¾ƒå°çš„Survivorç©ºé—´ï¼Œé»˜è®¤æ¯”ä¾‹ä¸º8ï¼š1ï¼š1ï¼Œè€å¹´ä»£çš„GCè¯„ç‡ç›¸å¯¹è¾ƒä½ï¼Œæ°¸ä¹…ä»£ä¸€èˆ¬å­˜æ”¾ç±»ä¿¡æ¯ç­‰ï¼ˆå…¶å®å°±æ˜¯æ–¹æ³•åŒºçš„å®ç°ï¼‰å¦‚å›¾æ‰€ç¤ºï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/OZrKbUm39lfaAgv.png" alt="image-20230306165311823" tabindex="0" loading="lazy"><figcaption>image-20230306165311823</figcaption></figure><p>é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•è¿ä½œçš„å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œæ‰€æœ‰æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œåœ¨ä¸€å¼€å§‹éƒ½ä¼šè¿›å…¥åˆ°æ–°ç”Ÿä»£çš„EdenåŒºï¼ˆå¦‚æœæ˜¯å¤§å¯¹è±¡ä¼šè¢«ç›´æ¥ä¸¢è¿›è€å¹´ä»£ï¼‰ï¼Œåœ¨è¿›è¡Œæ–°ç”Ÿä»£åŒºåŸŸçš„åƒåœ¾å›æ”¶æ—¶ï¼Œé¦–å…ˆä¼šå¯¹æ‰€æœ‰æ–°ç”Ÿä»£åŒºåŸŸçš„å¯¹è±¡è¿›è¡Œæ‰«æï¼Œå¹¶å›æ”¶é‚£äº›ä¸å†ä½¿ç”¨å¯¹è±¡ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/lENKm3CMuxk1JFI.png" alt="image-20230306165326642" tabindex="0" loading="lazy"><figcaption>image-20230306165326642</figcaption></figure><p>æ¥ç€ï¼Œåœ¨ä¸€æ¬¡åƒåœ¾å›æ”¶ä¹‹åï¼ŒEdenåŒºåŸŸæ²¡æœ‰è¢«å›æ”¶çš„å¯¹è±¡ï¼Œä¼šè¿›å…¥åˆ°SurvivoråŒºã€‚åœ¨ä¸€å¼€å§‹Fromå’ŒToéƒ½æ˜¯ç©ºçš„ï¼Œè€ŒGCä¹‹åï¼Œæ‰€æœ‰EdenåŒºåŸŸå­˜æ´»çš„å¯¹è±¡éƒ½ä¼šç›´æ¥è¢«æ”¾å…¥åˆ°FromåŒºï¼Œæœ€åFromå’ŒToä¼šå‘ç”Ÿä¸€æ¬¡äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´ç›®å‰å­˜æ”¾æˆ‘ä»¬å¯¹è±¡çš„FromåŒºï¼Œå˜ä¸ºToåŒºï¼Œè€ŒToåŒºå˜ä¸ºFromåŒºï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/xU6LY3nDukNg2rv.png" alt="image-20230306165336145" tabindex="0" loading="lazy"><figcaption>image-20230306165336145</figcaption></figure><p>æ¥ç€å°±æ˜¯ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶äº†ï¼Œæ“ä½œä¸ä¸Šé¢æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡è¿™æ—¶ç”±äºæˆ‘ä»¬FromåŒºåŸŸä¸­å·²ç»å­˜åœ¨å¯¹è±¡äº†ï¼Œæ‰€ä»¥ï¼Œåœ¨EdenåŒºçš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°FromåŒºä¹‹åï¼Œæ‰€æœ‰ToåŒºåŸŸä¸­çš„å¯¹è±¡ä¼šè¿›è¡Œå¹´é¾„åˆ¤å®šï¼ˆæ¯ç»å†ä¸€è½®GCå¹´é¾„<code>+1</code>ï¼Œå¦‚æœå¯¹è±¡çš„å¹´é¾„å¤§äº<code>é»˜è®¤å€¼ä¸º15</code>ï¼Œé‚£ä¹ˆä¼šç›´æ¥è¿›å…¥åˆ°è€å¹´ä»£ï¼Œå¦åˆ™ç§»åŠ¨åˆ°FromåŒºï¼‰</p><figure><img src="https://s2.loli.net/2023/03/06/NeGcYPwDOkdjVfq.png" alt="image-20230306165345563" tabindex="0" loading="lazy"><figcaption>image-20230306165345563</figcaption></figure><p>æœ€ååƒä¸Šé¢ä¸€æ ·äº¤æ¢ToåŒºå’ŒFromåŒºï¼Œä¹‹åä¸æ–­é‡å¤ä»¥ä¸Šæ­¥éª¤ã€‚</p><p>è€Œåƒåœ¾æ”¶é›†ä¹Ÿåˆ†ä¸ºï¼š</p><ul><li>Minor GC - æ¬¡è¦åƒåœ¾å›æ”¶ï¼Œä¸»è¦è¿›è¡Œæ–°ç”Ÿä»£åŒºåŸŸçš„åƒåœ¾æ”¶é›†ã€‚ <ul><li>è§¦å‘æ¡ä»¶ï¼šæ–°ç”Ÿä»£çš„EdenåŒºå®¹é‡å·²æ»¡æ—¶ã€‚</li></ul></li><li>Major GC - ä¸»è¦åƒåœ¾å›æ”¶ï¼Œä¸»è¦è¿›è¡Œè€å¹´ä»£çš„åƒåœ¾æ”¶é›†ã€‚</li><li>Full GC - å®Œå…¨åƒåœ¾å›æ”¶ï¼Œå¯¹æ•´ä¸ªJavaå †å†…å­˜å’Œæ–¹æ³•åŒºè¿›è¡Œåƒåœ¾å›æ”¶ã€‚ <ul><li>è§¦å‘æ¡ä»¶1ï¼šæ¯æ¬¡æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡å¹³å‡å¤§å°å¤§äºè€å¹´ä»£å‰©ä½™ç©ºé—´</li><li>è§¦å‘æ¡ä»¶2ï¼šMinor GCåå­˜æ´»çš„å¯¹è±¡è¶…è¿‡äº†è€å¹´ä»£å‰©ä½™ç©ºé—´</li><li>è§¦å‘æ¡ä»¶3ï¼šæ°¸ä¹…ä»£å†…å­˜ä¸è¶³ï¼ˆJDK8ä¹‹å‰ï¼‰</li><li>è§¦å‘æ¡ä»¶4ï¼šæ‰‹åŠ¨è°ƒç”¨<code>System.gc()</code>æ–¹æ³•</li></ul></li></ul><p>æˆ‘ä»¬å¯ä»¥æ·»åŠ å¯åŠ¨å‚æ•°æ¥æŸ¥çœ‹JVMçš„GCæ—¥å¿—ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/iWqvCUySGk8Qlad.png" alt="image-20230306165355706" tabindex="0" loading="lazy"><figcaption>image-20230306165355706</figcaption></figure><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        o </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>[GC (System.gc()) [PSYoungGen: 2621K-&gt;528K(76288K)] 2621K-&gt;528K(251392K), 0.0006874 secs] [Times: user=0.01 sys=0.01, real=0.00 secs] </span></span>
<span class="line"><span>[Full GC (System.gc()) [PSYoungGen: 528K-&gt;0K(76288K)] [ParOldGen: 0K-&gt;332K(175104K)] 528K-&gt;332K(251392K), [Metaspace: 3073K-&gt;3073K(1056768K)], 0.0022693 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span>Heap</span></span>
<span class="line"><span> PSYoungGen      total 76288K, used 3277K [0x000000076ab00000, 0x0000000770000000, 0x00000007c0000000)</span></span>
<span class="line"><span>  eden space 65536K, 5% used [0x000000076ab00000,0x000000076ae334d8,0x000000076eb00000)</span></span>
<span class="line"><span>  from space 10752K, 0% used [0x000000076eb00000,0x000000076eb00000,0x000000076f580000)</span></span>
<span class="line"><span>  to   space 10752K, 0% used [0x000000076f580000,0x000000076f580000,0x0000000770000000)</span></span>
<span class="line"><span> ParOldGen       total 175104K, used 332K [0x00000006c0000000, 0x00000006cab00000, 0x000000076ab00000)</span></span>
<span class="line"><span>  object space 175104K, 0% used [0x00000006c0000000,0x00000006c00532d8,0x00000006cab00000)</span></span>
<span class="line"><span> Metaspace       used 3096K, capacity 4496K, committed 4864K, reserved 1056768K</span></span>
<span class="line"><span>  class space    used 333K, capacity 388K, committed 512K, reserved 1048576K</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æˆ‘ä»¬è¿˜åªèƒ½å¤§è‡´çœ‹æ‡‚GCæ—¥å¿—ï¼Œä¸è¿‡åœ¨å­¦ä¹ å®Œæˆæœ¬ç« å…¨éƒ¨å†…å®¹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è½»æ¾é˜…è¯»äº†ã€‚</p><h4 id="ç©ºé—´åˆ†é…æ‹…ä¿" tabindex="-1"><a class="header-anchor" href="#ç©ºé—´åˆ†é…æ‹…ä¿"><span>ç©ºé—´åˆ†é…æ‹…ä¿</span></a></h4><p>æˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œæœ‰æ²¡æœ‰è¿™æ ·ä¸€ç§æç«¯æƒ…å†µï¼ˆæ­£å¸¸æƒ…å†µä¸‹æ–°ç”Ÿä»£çš„å›æ”¶ç‡æ˜¯å¾ˆé«˜çš„ï¼Œæ‰€ä»¥è¯´ä¸ç”¨å¤ªæ‹…å¿ƒä¼šç»å¸¸å‡ºç°è¿™ç§é—®é¢˜ï¼‰ï¼Œåœ¨ä¸€æ¬¡GCåï¼Œæ–°ç”Ÿä»£EdenåŒºä»ç„¶å­˜åœ¨å¤§é‡çš„å¯¹è±¡ï¼ˆå› ä¸ºGCä¹‹åå­˜æ´»å¯¹è±¡ä¼šè¿›å…¥åˆ°ä¸€ä¸ªSurvivoråŒºï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾è¿™æ—¶å·²ç»è¶…å‡ºSurvivoråŒºçš„å®¹é‡äº†ï¼Œè‚¯å®šæ˜¯è£…ä¸ä¸‹çš„ï¼‰é‚£ä¹ˆç°åœ¨è¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>è¿™æ—¶å°±éœ€è¦ç”¨åˆ°ç©ºé—´åˆ†é…æ‹…ä¿æœºåˆ¶äº†ï¼Œå¯ä»¥æŠŠSurvivoråŒºæ— æ³•å®¹çº³çš„å¯¹è±¡ç›´æ¥é€åˆ°è€å¹´ä»£ï¼Œè®©è€å¹´ä»£è¿›è¡Œåˆ†é…æ‹…ä¿ï¼ˆå½“ç„¶è€å¹´ä»£ä¹Ÿå¾—è£…å¾—ä¸‹æ‰è¡Œï¼‰åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œè´·æ¬¾ä¼šæŒ‡å®šæ‹…ä¿äººï¼Œå°±æ˜¯å½“å€Ÿæ¬¾äººè¿˜ä¸èµ·é’±çš„æ—¶å€™ç”±æ‹…ä¿äººæ¥è¿˜é’±ã€‚</p><p>å½“æ–°ç”Ÿä»£æ— æ³•å®¹çº³æ›´å¤šçš„çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥æŠŠæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ç§»åŠ¨åˆ°è€å¹´ä»£ä¸­ï¼Œè¿™æ ·æ–°ç”Ÿä»£å°±è…¾å‡ºäº†ç©ºé—´æ¥å®¹çº³æ›´å¤šçš„å¯¹è±¡ã€‚</p><p>å¥½ï¼Œé‚£æ—¢ç„¶æ–°ç”Ÿä»£è£…ä¸ä¸‹å°±ä¸¢ç»™è€å¹´ä»£ï¼Œé‚£ä¹ˆè¦æ˜¯è€å¹´ä»£ä¹Ÿè£…ä¸ä¸‹æ–°ç”Ÿä»£çš„æ•°æ®å‘¢ï¼Ÿè¿™æ—¶ï¼Œè€å¹´ä»£è‚¯å®šæ‹…ä¿äººæ˜¯å½“ä¸æˆäº†ï¼Œé‚£ä¹ˆè¿™æ ·çš„è¯ï¼Œé¦–å…ˆä¼šåˆ¤æ–­ä¸€ä¸‹ä¹‹å‰çš„æ¯æ¬¡åƒåœ¾å›æ”¶è¿›å…¥è€å¹´ä»£çš„å¹³å‡å¤§å°æ˜¯å¦å°äºå½“å‰è€å¹´ä»£çš„å‰©ä½™ç©ºé—´ï¼Œå¦‚æœå°äºï¼Œé‚£ä¹ˆè¯´æ˜ä¹Ÿè®¸å¯ä»¥æ”¾å¾—ä¸‹ï¼ˆä¸è¿‡ä¹Ÿä»…ä»…æ˜¯ä¹Ÿè®¸ï¼Œä¾ç„¶æœ‰å¯èƒ½æ”¾ä¸ä¸‹ï¼Œå› ä¸ºåˆ¤æ–­çš„å®é™…ä¸Šåªæ˜¯å¹³å‡å€¼ï¼Œä¸‡ä¸€è¿™ä¸€æ¬¡çªç„¶éå¸¸å¤§å‘¢ï¼‰ï¼Œå¦åˆ™ï¼Œä¼šå…ˆæ¥ä¸€æ¬¡Full GCï¼Œè¿›è¡Œä¸€æ¬¡å¤§è§„æ¨¡åƒåœ¾å›æ”¶ï¼Œæ¥å°è¯•è…¾å‡ºç©ºé—´ï¼Œå†æ¬¡åˆ¤æ–­è€å¹´ä»£æ˜¯å¦æœ‰ç©ºé—´å­˜æ”¾ï¼Œè¦æ˜¯è¿˜æ˜¯è£…ä¸ä¸‹ï¼Œç›´æ¥æŠ›å‡ºOOMé”™è¯¯ï¼Œæ‘†çƒ‚ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ä¸€æ¬¡Minor GCçš„æ•´ä¸ªè¿‡ç¨‹ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/71PqlEfiGgBSLae.png" alt="image-20230306165425918" tabindex="0" loading="lazy"><figcaption>image-20230306165425918</figcaption></figure><hr><h4 id="æ ‡è®°-æ¸…é™¤ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°-æ¸…é™¤ç®—æ³•"><span>æ ‡è®°-æ¸…é™¤ç®—æ³•</span></a></h4><p>å‰é¢æˆ‘ä»¬å·²ç»äº†è§£äº†æ•´ä¸ªå †å†…å­˜å®é™…ä¸Šæ˜¯ä»¥åˆ†ä»£æ”¶é›†æœºåˆ¶ä¸ºä¸»ï¼Œä½†æ˜¯ä¾ç„¶æ²¡æœ‰è®²åˆ°å…·ä½“çš„æ”¶é›†è¿‡ç¨‹ï¼Œé‚£ä¹ˆï¼Œå…·ä½“çš„å›æ”¶è¿‡ç¨‹åˆæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹æœ€å¤è€çš„<code>æ ‡è®°-æ¸…é™¤</code>ç®—æ³•ã€‚</p><p>é¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œç„¶åå†ä¾æ¬¡å›æ”¶æ‰è¢«æ ‡è®°çš„å¯¹è±¡ï¼Œæˆ–æ˜¯æ ‡è®°å‡ºæ‰€æœ‰ä¸éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåªå›æ”¶æœªæ ‡è®°çš„å¯¹è±¡ã€‚å®é™…ä¸Šè¿™ç§ç®—æ³•æ˜¯éå¸¸åŸºç¡€çš„ï¼Œå¹¶ä¸”æœ€æ˜“äºç†è§£çš„ï¼ˆè¿™é‡Œå¯¹è±¡æˆ‘å°±ä»¥ä¸€ä¸ªæ–¹æ¡†ä»£æ›¿äº†ï¼Œå½“ç„¶å®é™…ä¸Šå­˜æ”¾æ˜¯æˆ‘ä»¬å‰è¯´åˆ°çš„GC Rootså½¢å¼ï¼‰</p><figure><img src="https://s2.loli.net/2023/03/06/d8anmBcLrW3iyJl.png" alt="image-20230306165444019" tabindex="0" loading="lazy"><figcaption>image-20230306165444019</figcaption></figure><p>è™½ç„¶æ­¤æ–¹æ³•éå¸¸ç®€å•ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜¯éå¸¸æ˜æ˜¾çš„ ï¼Œé¦–å…ˆå¦‚æœå†…å­˜ä¸­å­˜åœ¨å¤§é‡çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå¯èƒ½å°±ä¼šå­˜åœ¨å¤§é‡çš„æ ‡è®°ï¼Œå¹¶ä¸”å¤§è§„æ¨¡è¿›è¡Œæ¸…é™¤ã€‚å¹¶ä¸”ä¸€æ¬¡æ ‡è®°æ¸…é™¤ä¹‹åï¼Œè¿ç»­çš„å†…å­˜ç©ºé—´å¯èƒ½ä¼šå‡ºç°è®¸è®¸å¤šå¤šçš„ç©ºéš™ï¼Œç¢ç‰‡åŒ–ä¼šå¯¼è‡´è¿ç»­å†…å­˜ç©ºé—´åˆ©ç”¨ç‡é™ä½ã€‚</p><h4 id="æ ‡è®°-å¤åˆ¶ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°-å¤åˆ¶ç®—æ³•"><span>æ ‡è®°-å¤åˆ¶ç®—æ³•</span></a></h4><p>æ—¢ç„¶æ ‡è®°æ¸…é™¤ç®—æ³•åœ¨é¢å¯¹å¤§é‡å¯¹è±¡æ—¶æ•ˆç‡ä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•ã€‚å®ƒå°†å®¹é‡åˆ†ä¸ºåŒæ ·å¤§å°çš„ä¸¤å—åŒºåŸŸï¼Œ</p><p>æ ‡è®°å¤åˆ¶ç®—æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯å°†å†…å­˜åŒºåŸŸåˆ’åˆ†ä¸ºå¤§å°ç›¸åŒçš„ä¸¤å—åŒºåŸŸï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—åŒºåŸŸï¼Œæ¯æ¬¡åƒåœ¾å›æ”¶ç»“æŸåï¼Œå°†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡å…¨éƒ¨å¤åˆ¶åˆ°å¦ä¸€å—åŒºåŸŸä¸­ï¼Œå¹¶ä¸€æ¬¡æ€§æ¸…ç©ºå½“å‰åŒºåŸŸã€‚è™½ç„¶æµªè´¹äº†ä¸€äº›æ—¶é—´è¿›è¡Œå¤åˆ¶æ“ä½œï¼Œä½†æ˜¯è¿™æ ·èƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³å¯¹è±¡å¤§é¢ç§¯å›æ”¶åç©ºé—´ç¢ç‰‡åŒ–ä¸¥é‡çš„é—®é¢˜ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/JeifGj6kmVAY2PR.png" alt="image-20230306165458671" tabindex="0" loading="lazy"><figcaption>image-20230306165458671</figcaption></figure><p>è¿™ç§ç®—æ³•å°±éå¸¸é€‚ç”¨äºæ–°ç”Ÿä»£ï¼ˆå› ä¸ºæ–°ç”Ÿä»£çš„å›æ”¶æ•ˆç‡æé«˜ï¼Œä¸€èˆ¬ä¸ä¼šç•™ä¸‹å¤ªå¤šçš„å¯¹è±¡ï¼‰çš„åƒåœ¾å›æ”¶ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„æ–°ç”Ÿä»£SurvivoråŒºå…¶å®å°±æ˜¯è¿™ä¸ªæ€è·¯ï¼ŒåŒ…æ‹¬8:1:1çš„æ¯”ä¾‹ä¹Ÿæ­£æ˜¯ä¸ºäº†å¯¹æ ‡è®°å¤åˆ¶ç®—æ³•è¿›è¡Œä¼˜åŒ–è€Œé‡‡å–çš„ã€‚</p><h4 id="æ ‡è®°-æ•´ç†ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°-æ•´ç†ç®—æ³•"><span>æ ‡è®°-æ•´ç†ç®—æ³•</span></a></h4><p>è™½ç„¶æ ‡è®°-å¤åˆ¶ç®—æ³•èƒ½å¤Ÿå¾ˆå¥½åœ°åº”å¯¹æ–°ç”Ÿä»£é«˜å›æ”¶ç‡çš„åœºæ™¯ï¼Œä½†æ˜¯æ”¾åˆ°è€å¹´ä»£ï¼Œå®ƒå°±æ˜¾å¾—å¾ˆé¸¡è‚‹äº†ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä¸€èˆ¬é•¿æœŸéƒ½å›æ”¶ä¸åˆ°çš„å¯¹è±¡ï¼Œæ‰æœ‰æœºä¼šè¿›å…¥åˆ°è€å¹´ä»£ï¼Œæ‰€ä»¥è€å¹´ä»£ä¸€èˆ¬éƒ½æ˜¯äº›é’‰å­æˆ·ï¼Œå¯èƒ½ä¸€æ¬¡GCåï¼Œä»ç„¶å­˜ç•™å¾ˆå¤šå¯¹è±¡ã€‚è€Œæ ‡è®°å¤åˆ¶ç®—æ³•ä¼šåœ¨GCåå®Œæ•´å¤åˆ¶æ•´ä¸ªåŒºåŸŸå†…å®¹ï¼Œå¹¶ä¸”ä¼šæŠ˜æŸ50%çš„åŒºåŸŸï¼Œæ˜¾ç„¶è¿™å¹¶ä¸é€‚ç”¨äºè€å¹´ä»£ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬èƒ½å¦è¿™æ ·ï¼Œåœ¨æ ‡è®°æ‰€æœ‰å¾…å›æ”¶å¯¹è±¡ä¹‹åï¼Œä¸æ€¥ç€å»è¿›è¡Œå›æ”¶æ“ä½œï¼Œè€Œæ˜¯å°†æ‰€æœ‰å¾…å›æ”¶çš„å¯¹è±¡æ•´é½æ’åˆ—åœ¨ä¸€æ®µå†…å­˜ç©ºé—´ä¸­ï¼Œè€Œéœ€è¦å›æ”¶çš„å¯¹è±¡å…¨éƒ¨å¾€åä¸¢ï¼Œè¿™æ ·ï¼Œå‰åŠéƒ¨åˆ†çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯æ— éœ€è¿›è¡Œå›æ”¶çš„ï¼Œè€ŒååŠéƒ¨åˆ†ç›´æ¥ä¸€æ¬¡æ€§æ¸…é™¤å³å¯ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/4UncSVvO1P2xWKL.png" alt="image-20230306165514101" tabindex="0" loading="lazy"><figcaption>image-20230306165514101</figcaption></figure><p>è™½ç„¶è¿™æ ·èƒ½ä¿è¯å†…å­˜ç©ºé—´å……åˆ†ä½¿ç”¨ï¼Œå¹¶ä¸”ä¹Ÿæ²¡æœ‰æ ‡è®°å¤åˆ¶ç®—æ³•é‚£ä¹ˆç¹æ‚ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå®ƒçš„æ•ˆç‡æ¯”å‰ä¸¤è€…éƒ½ä½ã€‚ç”šè‡³ï¼Œç”±äºéœ€è¦ä¿®æ”¹å¯¹è±¡åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œæ­¤æ—¶ç¨‹åºå¿…é¡»è¦æš‚åœæ‰å¯ä»¥ï¼Œåœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªç¨‹åºå‘ç”Ÿåœé¡¿ï¼ˆè¢«ç§°ä¸ºâ€œStop The Worldâ€ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ‡è®°æ¸…é™¤ç®—æ³•å’Œæ ‡è®°æ•´ç†ç®—æ³•æ··åˆä½¿ç”¨ï¼Œåœ¨å†…å­˜ç©ºé—´è¿˜ä¸æ˜¯å¾ˆå‡Œä¹±çš„æ—¶å€™ï¼Œé‡‡ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•å…¶å®æ˜¯æ²¡æœ‰å¤šå¤§é—®é¢˜çš„ï¼Œå½“å†…å­˜ç©ºé—´å‡Œä¹±åˆ°ä¸€å®šç¨‹åº¦åï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€æ¬¡æ ‡è®°æ•´ç†ç®—æ³•ã€‚</p><hr><h3 id="åƒåœ¾æ”¶é›†å™¨å®ç°" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾æ”¶é›†å™¨å®ç°"><span>åƒåœ¾æ”¶é›†å™¨å®ç°</span></a></h3><p>èŠå®Œäº†å¯¹è±¡å­˜æ´»åˆ¤å®šå’Œåƒåœ¾å›æ”¶ç®—æ³•ï¼Œæ¥ç€æˆ‘ä»¬å°±è¦çœ‹çœ‹å…·ä½“æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨çš„å®ç°äº†ã€‚æˆ‘ä»¬å¯ä»¥è‡ªç”±åœ°ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£é€‰æ‹©æ›´é€‚åˆå®ƒä»¬çš„æ”¶é›†å™¨ã€‚</p><h4 id="serialæ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#serialæ”¶é›†å™¨"><span>Serialæ”¶é›†å™¨</span></a></h4><p>è¿™æ¬¾åƒåœ¾æ”¶é›†å™¨ä¹Ÿæ˜¯å…ƒè€çº§åˆ«çš„æ”¶é›†å™¨äº†ï¼Œåœ¨JDK1.3.1ä¹‹å‰ï¼Œæ˜¯è™šæ‹Ÿæœºæ–°ç”Ÿä»£åŒºåŸŸæ”¶é›†å™¨çš„å”¯ä¸€é€‰æ‹©ã€‚è¿™æ˜¯ä¸€æ¬¾å•çº¿ç¨‹çš„åƒåœ¾æ”¶é›†å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å¼€å§‹è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œéœ€è¦æš‚åœæ‰€æœ‰çš„çº¿ç¨‹ï¼Œç›´åˆ°åƒåœ¾æ”¶é›†å·¥ä½œç»“æŸã€‚å®ƒçš„æ–°ç”Ÿä»£æ”¶é›†ç®—æ³•é‡‡ç”¨çš„æ˜¯æ ‡è®°å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£é‡‡ç”¨çš„æ˜¯æ ‡è®°æ•´ç†ç®—æ³•ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/v79TEdmyo1njKwl.png" alt="image-20230306165527009" tabindex="0" loading="lazy"><figcaption>image-20230306165527009</figcaption></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“è¿›å…¥åˆ°åƒåœ¾å›æ”¶é˜¶æ®µæ—¶ï¼Œæ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹å¿…é¡»ç­‰å¾…GCçº¿ç¨‹å®Œæˆå·¥ä½œï¼Œå°±ç›¸å½“äºä½ æ‰“ä¸€æŠŠLOL 40åˆ†é’Ÿï¼Œä¸­é€”æ¯éš”1åˆ†é’Ÿç½‘ç»œå°±å¡5ç§’é’Ÿï¼Œå¯èƒ½è¿™æ—¶ä½ æ­£åœ¨æ‰“å›¢ï¼Œç»“æœä½ è¢«ç‰©ç†æ§åˆ¶ç›´æ¥åœ¨é‚£é‡Œç«™äº†5ç§’é’Ÿï¼Œè¿™ç¡®å®è®©äººéš¾ä»¥æ¥å—ã€‚</p><p>è™½ç„¶ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œä½†æ˜¯ä¼˜åŠ¿ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š</p><ol><li>è®¾è®¡ç®€å•è€Œé«˜æ•ˆã€‚</li><li>åœ¨ç”¨æˆ·çš„æ¡Œé¢åº”ç”¨åœºæ™¯ä¸­ï¼Œå†…å­˜ä¸€èˆ¬ä¸å¤§ï¼Œå¯ä»¥åœ¨è¾ƒçŸ­æ—¶é—´å†…å®Œæˆåƒåœ¾æ”¶é›†ï¼Œåªè¦ä¸é¢‘ç¹å‘ç”Ÿï¼Œä½¿ç”¨ä¸²è¡Œå›æ”¶å™¨æ˜¯å¯ä»¥æ¥å—çš„ã€‚</li></ol><p>æ‰€ä»¥ï¼Œåœ¨å®¢æˆ·ç«¯æ¨¡å¼ï¼ˆä¸€èˆ¬ç”¨äºä¸€äº›æ¡Œé¢çº§å›¾å½¢åŒ–ç•Œé¢åº”ç”¨ç¨‹åºï¼‰ä¸‹çš„æ–°ç”Ÿä»£ä¸­ï¼Œé»˜è®¤åƒåœ¾æ”¶é›†å™¨è‡³ä»Šä¾ç„¶æ˜¯Serialæ”¶é›†å™¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨<code>java -version</code>ä¸­æŸ¥çœ‹é»˜è®¤çš„å®¢æˆ·ç«¯æ¨¡å¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>openjdk version &quot;1.8.0_322&quot;</span></span>
<span class="line"><span>OpenJDK Runtime Environment (Zulu 8.60.0.21-CA-macos-aarch64) (build 1.8.0_322-b06)</span></span>
<span class="line"><span>OpenJDK 64-Bit Server VM (Zulu 8.60.0.21-CA-macos-aarch64) (build 25.322-b06, mixed mode)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥åœ¨jvm.cfgæ–‡ä»¶ä¸­åˆ‡æ¢JREä¸ºServer VMæˆ–æ˜¯Client VMï¼Œé»˜è®¤è·¯å¾„ä¸ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>JDKå®‰è£…ç›®å½•/jre/lib/jvm.cfg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦å°†å½“å‰æ¨¡å¼åˆ‡æ¢ä¸ºå®¢æˆ·ç«¯æ¨¡å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™æ ·ç¼–è¾‘ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>-client KNOWN</span></span>
<span class="line"><span>-server IGNORE</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parnewæ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#parnewæ”¶é›†å™¨"><span>ParNewæ”¶é›†å™¨</span></a></h4><p>è¿™æ¬¾åƒåœ¾æ”¶é›†å™¨ç›¸å½“äºæ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œå®ƒèƒ½å¤Ÿæ”¯æŒå¤šçº¿ç¨‹åƒåœ¾æ”¶é›†ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/tQwzAK1XU5gdl8Y.png" alt="image-20230306165542516" tabindex="0" loading="lazy"><figcaption>image-20230306165542516</figcaption></figure><p>é™¤äº†å¤šçº¿ç¨‹æ”¯æŒä»¥å¤–ï¼Œå…¶ä»–å†…å®¹åŸºæœ¬ä¸Serialæ”¶é›†å™¨ä¸€è‡´ï¼Œå¹¶ä¸”ç›®å‰æŸäº›JVMé»˜è®¤çš„æœåŠ¡ç«¯æ¨¡å¼æ–°ç”Ÿä»£æ”¶é›†å™¨å°±æ˜¯ä½¿ç”¨çš„ParNewæ”¶é›†å™¨ã€‚</p><h4 id="parallel-scavenge-parallel-oldæ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#parallel-scavenge-parallel-oldæ”¶é›†å™¨"><span>Parallel Scavenge/Parallel Oldæ”¶é›†å™¨</span></a></h4><p>Parallel ScavengeåŒæ ·æ˜¯ä¸€æ¬¾é¢å‘æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†å™¨ï¼ŒåŒæ ·é‡‡ç”¨æ ‡è®°å¤åˆ¶ç®—æ³•å®ç°ï¼Œåœ¨JDK6æ—¶ä¹Ÿæ¨å‡ºäº†å…¶è€å¹´ä»£æ”¶é›†å™¨Parallel Oldï¼Œé‡‡ç”¨æ ‡è®°æ•´ç†ç®—æ³•å®ç°ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/npiZY1Q4e5EhGuB.png" alt="image-20230306165555265" tabindex="0" loading="lazy"><figcaption>image-20230306165555265</figcaption></figure><p>ä¸ParNewæ”¶é›†å™¨ä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šè‡ªåŠ¨è¡¡é‡ä¸€ä¸ªååé‡ï¼Œå¹¶æ ¹æ®ååé‡æ¥å†³å®šæ¯æ¬¡åƒåœ¾å›æ”¶çš„æ—¶é—´ï¼Œè¿™ç§è‡ªé€‚åº”æœºåˆ¶ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°æƒè¡¡å½“å‰æœºå™¨çš„æ€§èƒ½ï¼Œæ ¹æ®æ€§èƒ½é€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆã€‚</p><p>ç›®å‰JDK8é‡‡ç”¨çš„å°±æ˜¯è¿™ç§ Parallel Scavenge + Parallel Old çš„åƒåœ¾å›æ”¶æ–¹æ¡ˆã€‚</p><h4 id="cmsæ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#cmsæ”¶é›†å™¨"><span>CMSæ”¶é›†å™¨</span></a></h4><p>åœ¨JDK1.5ï¼ŒHotSpotæ¨å‡ºäº†ä¸€æ¬¾åœ¨å¼ºäº¤äº’åº”ç”¨ä¸­å‡ ä¹å¯è®¤ä¸ºæœ‰åˆ’æ—¶ä»£æ„ä¹‰çš„åƒåœ¾æ”¶é›†å™¨ï¼šCMSï¼ˆConcurrent-Mark-Sweepï¼‰æ”¶é›†å™¨ï¼Œè¿™æ¬¾æ”¶é›†å™¨æ˜¯HotSpotè™šæ‹Ÿæœºä¸­ç¬¬ä¸€æ¬¾çœŸæ­£æ„ä¹‰ä¸Šçš„å¹¶å‘ï¼ˆæ³¨æ„è¿™é‡Œçš„å¹¶å‘å’Œä¹‹å‰çš„å¹¶è¡Œæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå¹¶å‘å¯ä»¥ç†è§£ä¸ºåŒæ—¶è¿è¡Œç”¨æˆ·çº¿ç¨‹å’ŒGCçº¿ç¨‹ï¼Œè€Œå¹¶è¡Œå¯ä»¥ç†è§£ä¸ºå¤šæ¡GCçº¿ç¨‹åŒæ—¶å·¥ä½œï¼‰æ”¶é›†å™¨ï¼Œå®ƒç¬¬ä¸€æ¬¡å®ç°äº†è®©åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å·¥ä½œã€‚</p><p>å®ƒä¸»è¦é‡‡ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/qhmndIQPKarvDso.png" alt="image-20230306165610810" tabindex="0" loading="lazy"><figcaption>image-20230306165610810</figcaption></figure><p>å®ƒçš„åƒåœ¾å›æ”¶åˆ†ä¸º4ä¸ªé˜¶æ®µï¼š</p><ul><li>åˆå§‹æ ‡è®°ï¼ˆéœ€è¦æš‚åœç”¨æˆ·çº¿ç¨‹ï¼‰ï¼šè¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ä»»åŠ¡ä»…ä»…åªæ˜¯æ ‡è®°å‡ºGC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä¸ç”¨æ‹…å¿ƒä¼šåœé¡¿å¤ªé•¿æ—¶é—´ã€‚</li><li>å¹¶å‘æ ‡è®°ï¼šä»GC Rootsçš„ç›´æ¥å…³è”å¯¹è±¡å¼€å§‹éå†æ•´ä¸ªå¯¹è±¡å›¾çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è€—æ—¶è¾ƒé•¿ä½†æ˜¯ä¸éœ€è¦åœé¡¿ç”¨æˆ·çº¿ç¨‹ï¼Œå¯ä»¥ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸€èµ·å¹¶å‘è¿è¡Œã€‚</li><li>é‡æ–°æ ‡è®°ï¼ˆéœ€è¦æš‚åœç”¨æˆ·çº¿ç¨‹ï¼‰ï¼šç”±äºå¹¶å‘æ ‡è®°é˜¶æ®µå¯èƒ½æŸäº›ç”¨æˆ·çº¿ç¨‹ä¼šå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜å¾—ï¼Œå› æ­¤è¿™é‡Œéœ€è¦å†æ¬¡æš‚åœæ‰€æœ‰çº¿ç¨‹è¿›è¡Œå¹¶è¡Œæ ‡è®°ï¼Œè¿™ä¸ªæ—¶é—´ä¼šæ¯”åˆå§‹æ ‡è®°æ—¶é—´é•¿ä¸€ä¸¢ä¸¢ã€‚</li><li>å¹¶å‘æ¸…é™¤ï¼šæœ€åå°±å¯ä»¥ç›´æ¥å°†æ‰€æœ‰æ ‡è®°å¥½çš„æ— ç”¨å¯¹è±¡è¿›è¡Œåˆ é™¤ï¼Œå› ä¸ºè¿™äº›å¯¹è±¡ç¨‹åºä¸­ä¹Ÿç”¨ä¸åˆ°äº†ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿è¡Œã€‚</li></ul><p>è™½ç„¶å®ƒçš„ä¼˜ç‚¹éå¸¸ä¹‹å¤§ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œæ ‡è®°æ¸…é™¤ç®—æ³•ä¼šäº§ç”Ÿå¤§é‡çš„å†…å­˜ç¢ç‰‡ï¼Œå¯¼è‡´å¯ç”¨è¿ç»­ç©ºé—´é€æ¸å˜å°‘ï¼Œé•¿æœŸè¿™æ ·ä¸‹æ¥ï¼Œä¼šæœ‰æ›´é«˜çš„æ¦‚ç‡è§¦å‘Full GCï¼Œå¹¶ä¸”åœ¨ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šå ç”¨ä¸€éƒ¨åˆ†çš„ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´ç”¨æˆ·çº¿ç¨‹çš„è¿è¡Œé€Ÿåº¦ä¸€å®šç¨‹åº¦ä¸Šå‡æ…¢ã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœä½ å¸Œæœ›çš„æ˜¯æœ€ä½çš„GCåœé¡¿æ—¶é—´ï¼Œè¿™æ¬¾åƒåœ¾æ”¶é›†å™¨æ— ç–‘æ˜¯æœ€ä½³é€‰æ‹©ï¼Œä¸è¿‡è‡ªä»G1æ”¶é›†å™¨é—®ä¸–ä¹‹åï¼ŒCMSæ”¶é›†å™¨ä¸å†æ¨èä½¿ç”¨äº†ã€‚</p><h4 id="garbage-first-g1-æ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#garbage-first-g1-æ”¶é›†å™¨"><span>Garbage First (G1) æ”¶é›†å™¨</span></a></h4><p>æ­¤åƒåœ¾æ”¶é›†å™¨ä¹Ÿæ˜¯ä¸€æ¬¾åˆ’æ—¶ä»£çš„åƒåœ¾æ”¶é›†å™¨ï¼Œåœ¨JDK7çš„æ—¶å€™æ­£å¼èµ°ä¸Šå†å²èˆå°ï¼Œå®ƒæ˜¯ä¸€æ¬¾ä¸»è¦é¢å‘äºæœåŠ¡ç«¯çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå¹¶ä¸”åœ¨JDK9æ—¶ï¼Œå–ä»£äº†JDK8é»˜è®¤çš„ Parallel Scavenge + Parallel Old çš„å›æ”¶æ–¹æ¡ˆã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬çš„åƒåœ¾å›æ”¶åˆ†ä¸º<code>Minor GC</code>ã€<code>Major GC </code>å’Œ<code>Full GC</code>ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”çš„æ˜¯æ–°ç”Ÿä»£ï¼Œè€å¹´ä»£å’Œæ•´ä¸ªå †å†…å­˜çš„åƒåœ¾å›æ”¶ï¼Œè€ŒG1æ”¶é›†å™¨å·§å¦™åœ°ç»•è¿‡äº†è¿™äº›çº¦å®šï¼Œå®ƒå°†æ•´ä¸ªJavaå †åˆ’åˆ†æˆ<code>2048</code>ä¸ªå¤§å°ç›¸åŒçš„ç‹¬ç«‹<code>Region</code>å—ï¼Œæ¯ä¸ª<code>Regionå—</code>çš„å¤§å°æ ¹æ®å †ç©ºé—´çš„å®é™…å¤§å°è€Œå®šï¼Œæ•´ä½“è¢«æ§åˆ¶åœ¨1MBåˆ°32MBä¹‹é—´ï¼Œä¸”éƒ½ä¸º2çš„Næ¬¡å¹‚ã€‚æ‰€æœ‰çš„<code>Region</code>å¤§å°ç›¸åŒï¼Œä¸”åœ¨JVMçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p><p>é‚£ä¹ˆåˆ†å‡ºè¿™äº›<code>Region</code>æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿæ¯ä¸€ä¸ª<code>Region</code>éƒ½å¯ä»¥æ ¹æ®éœ€è¦ï¼Œè‡ªç”±å†³å®šæ‰®æ¼”å“ªä¸ªè§’è‰²ï¼ˆEdenã€Survivorå’Œè€å¹´ä»£ï¼‰ï¼Œæ”¶é›†å™¨ä¼šæ ¹æ®å¯¹åº”çš„è§’è‰²é‡‡ç”¨ä¸åŒçš„å›æ”¶ç­–ç•¥ã€‚æ­¤å¤–ï¼ŒG1æ”¶é›†å™¨è¿˜å­˜åœ¨ä¸€ä¸ªHumongousåŒºåŸŸï¼Œå®ƒä¸“é—¨ç”¨äºå­˜æ”¾å¤§å¯¹è±¡ï¼ˆä¸€èˆ¬è®¤ä¸ºå¤§å°è¶…è¿‡äº†Regionå®¹é‡ä¸€åŠçš„å¯¹è±¡ä¸ºå¤§å¯¹è±¡ï¼‰è¿™æ ·ï¼Œæ–°ç”Ÿä»£ã€è€å¹´ä»£åœ¨ç‰©ç†ä¸Šï¼Œä¸å†æ˜¯ä¸€ä¸ªè¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œè€Œæ˜¯åˆ°å¤„åˆ†å¸ƒçš„ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/yHxXZP92DKc5Qre.png" alt="image-20230306165629129" tabindex="0" loading="lazy"><figcaption>image-20230306165629129</figcaption></figure><p>å®ƒçš„å›æ”¶è¿‡ç¨‹ä¸CMSå¤§ä½“ç±»ä¼¼ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/kXRMlt5iFDvjq8y.png" alt="image-20230306165641872" tabindex="0" loading="lazy"><figcaption>image-20230306165641872</figcaption></figure><p>åˆ†ä¸ºä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š</p><ul><li>åˆå§‹æ ‡è®°ï¼ˆæš‚åœç”¨æˆ·çº¿ç¨‹ï¼‰ï¼šä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹TAMSæŒ‡é’ˆçš„å€¼ï¼Œè®©ä¸‹ä¸€é˜¶æ®µç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿è¡Œæ—¶ï¼Œèƒ½æ­£ç¡®åœ°åœ¨å¯ç”¨çš„Regionä¸­åˆ†é…æ–°å¯¹è±¡ã€‚è¿™ä¸ªé˜¶æ®µéœ€è¦åœé¡¿çº¿ç¨‹ï¼Œä½†è€—æ—¶å¾ˆçŸ­ï¼Œè€Œä¸”æ˜¯å€Ÿç”¨è¿›è¡ŒMinor GCçš„æ—¶å€™åŒæ­¥å®Œæˆçš„ï¼Œæ‰€ä»¥G1æ”¶é›†å™¨åœ¨è¿™ä¸ªé˜¶æ®µå®é™…å¹¶æ²¡æœ‰é¢å¤–çš„åœé¡¿ã€‚</li><li>å¹¶å‘æ ‡è®°ï¼šä»GC Rootå¼€å§‹å¯¹å †ä¸­å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œé€’å½’æ‰«ææ•´ä¸ªå †é‡Œçš„å¯¹è±¡å›¾ï¼Œæ‰¾å‡ºè¦å›æ”¶çš„å¯¹è±¡ï¼Œè¿™é˜¶æ®µè€—æ—¶è¾ƒé•¿ï¼Œä½†å¯ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œã€‚</li><li>æœ€ç»ˆæ ‡è®°ï¼ˆæš‚åœç”¨æˆ·çº¿ç¨‹ï¼‰ï¼šå¯¹ç”¨æˆ·çº¿ç¨‹åšä¸€ä¸ªçŸ­æš‚çš„æš‚åœï¼Œç”¨äºå¤„ç†å¹¶å‘æ ‡è®°é˜¶æ®µæ¼æ ‡çš„é‚£éƒ¨åˆ†å¯¹è±¡ã€‚</li><li>ç­›é€‰å›æ”¶ï¼šè´Ÿè´£æ›´æ–°Regionçš„ç»Ÿè®¡æ•°æ®ï¼Œå¯¹å„ä¸ªRegionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„åœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©ä»»æ„å¤šä¸ªRegionæ„æˆå›æ”¶é›†ï¼Œç„¶åæŠŠå†³å®šå›æ”¶çš„é‚£ä¸€éƒ¨åˆ†Regionçš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°ç©ºçš„Regionä¸­ï¼Œå†æ¸…ç†æ‰æ•´ä¸ªæ—§Regionçš„å…¨éƒ¨ç©ºé—´ã€‚è¿™é‡Œçš„æ“ä½œæ¶‰åŠå­˜æ´»å¯¹è±¡çš„ç§»åŠ¨ï¼Œæ˜¯å¿…é¡»æš‚åœç”¨æˆ·çº¿ç¨‹ï¼Œç”±å¤šä¸ªæ”¶é›†å™¨çº¿ç¨‹å¹¶è¡Œå®Œæˆçš„ã€‚</li></ul><hr><h3 id="å…ƒç©ºé—´" tabindex="-1"><a class="header-anchor" href="#å…ƒç©ºé—´"><span>å…ƒç©ºé—´</span></a></h3><p>JDK8ä¹‹å‰ï¼ŒHotspotè™šæ‹Ÿæœºçš„æ–¹æ³•åŒºå®é™…ä¸Šæ˜¯æ°¸ä¹…ä»£å®ç°çš„ã€‚åœ¨JDK8ä¹‹åï¼ŒHotspotè™šæ‹Ÿæœºä¸å†ä½¿ç”¨æ°¸ä¹…ä»£ï¼Œè€Œæ˜¯é‡‡ç”¨äº†å…¨æ–°çš„å…ƒç©ºé—´ã€‚ç±»çš„å…ƒä¿¡æ¯è¢«å­˜å‚¨åœ¨å…ƒç©ºé—´ä¸­ã€‚å…ƒç©ºé—´æ²¡æœ‰ä½¿ç”¨å †å†…å­˜ï¼Œè€Œæ˜¯ä¸å †ä¸ç›¸è¿çš„æœ¬åœ°å†…å­˜åŒºåŸŸã€‚æ‰€ä»¥ï¼Œç†è®ºä¸Šç³»ç»Ÿå¯ä»¥ä½¿ç”¨çš„å†…å­˜æœ‰å¤šå¤§ï¼Œå…ƒç©ºé—´å°±æœ‰å¤šå¤§ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°æ°¸ä¹…ä»£å­˜åœ¨æ—¶çš„å†…å­˜æº¢å‡ºé—®é¢˜ã€‚è¿™é¡¹æ”¹é€ ä¹Ÿæ˜¯æœ‰å¿…è¦çš„ï¼Œæ°¸ä¹…ä»£çš„è°ƒä¼˜æ˜¯å¾ˆå›°éš¾çš„ï¼Œè™½ç„¶å¯ä»¥è®¾ç½®æ°¸ä¹…ä»£çš„å¤§å°ï¼Œä½†æ˜¯å¾ˆéš¾ç¡®å®šä¸€ä¸ªåˆé€‚çš„å¤§å°ï¼Œå› ä¸ºå…¶ä¸­çš„å½±å“å› ç´ å¾ˆå¤šï¼Œæ¯”å¦‚ç±»æ•°é‡çš„å¤šå°‘ã€å¸¸é‡æ•°é‡çš„å¤šå°‘ç­‰ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/2RD3AnPvbh1lQ5N.png" alt="image-20230306165703340" tabindex="0" loading="lazy"><figcaption>image-20230306165703340</figcaption></figure><p>å› æ­¤åœ¨JDK8æ—¶ç›´æ¥å°†æœ¬åœ°å†…å­˜ä½œä¸ºå…ƒç©ºé—´ï¼ˆ<strong>Metaspace</strong>ï¼‰çš„åŒºåŸŸï¼Œç‰©ç†å†…å­˜æœ‰å¤šå¤§ï¼Œå…ƒç©ºé—´å†…å­˜å°±å¯ä»¥æœ‰å¤šå¤§ï¼Œè¿™æ ·æ°¸ä¹…ä»£çš„ç©ºé—´åˆ†é…é—®é¢˜å°±è®²è§£äº†ï¼Œæ‰€ä»¥æœ€ç»ˆå®ƒå˜æˆäº†è¿™æ ·ï¼š</p><figure><img src="https://s2.loli.net/2023/03/06/iVcYMU9jdn2NC6Z.png" alt="image-20230306165714662" tabindex="0" loading="lazy"><figcaption>image-20230306165714662</figcaption></figure><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å¯¹äºJVMå†…å­˜åŒºåŸŸçš„è®²è§£å°±åŸºæœ¬å®Œæˆäº†ã€‚</p><hr><h3 id="å…¶ä»–å¼•ç”¨ç±»å‹" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–å¼•ç”¨ç±»å‹"><span>å…¶ä»–å¼•ç”¨ç±»å‹</span></a></h3><p>æœ€åï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹å…¶ä»–å¼•ç”¨ç±»å‹ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Javaä¸­ï¼Œå¦‚æœå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„ï¼Œé‚£ä¹ˆå®ƒå®é™…ä¸Šå­˜æ”¾çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆå­˜æ”¾çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ã€‚å®é™…ä¸Šæˆ‘ä»¬å¹³æ—¶ä»£ç ä¸­ç±»ä¼¼äº<code>Object o = new Object()</code>è¿™æ ·çš„çš„å¼•ç”¨ç±»å‹ï¼Œç»†åˆ†ä¹‹åå¯ä»¥ç§°ä¸º<code>å¼ºå¼•ç”¨</code>ã€‚</p><p>æˆ‘ä»¬é€šè¿‡å‰é¢çš„å­¦ä¹ å¯ä»¥æ˜ç¡®ï¼Œå¦‚æœæ–¹æ³•ä¸­å­˜åœ¨è¿™æ ·çš„<code>å¼ºå¼•ç”¨</code>ç±»å‹ï¼Œç°åœ¨éœ€è¦å›æ”¶å¼ºå¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¦ä¹ˆæ­¤æ–¹æ³•è¿è¡Œç»“æŸï¼Œè¦ä¹ˆå¼•ç”¨è¿æ¥æ–­å¼€ï¼Œå¦åˆ™è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯æ— æ³•è¢«åˆ¤å®šä¸ºå¯å›æ”¶çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¯´ä¸å®šåé¢è¿˜è¦ä½¿ç”¨å®ƒã€‚</p><p>æ‰€ä»¥ï¼Œå½“JVMå†…å­˜ç©ºé—´ä¸è¶³æ—¶ï¼ŒJVMå®æ„¿æŠ›å‡ºOutOfMemoryErrorä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„â€œå­˜æ´»â€å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚</p><p>é™¤äº†å¼ºå¼•ç”¨ä¹‹å¤–ï¼ŒJavaä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸‰ç§é¢å¤–çš„å¼•ç”¨ç±»å‹ã€‚</p><h4 id="è½¯å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#è½¯å¼•ç”¨"><span>è½¯å¼•ç”¨</span></a></h4><p>è½¯å¼•ç”¨ä¸åƒå¼ºå¼•ç”¨é‚£æ ·ä¸å¯å›æ”¶ï¼Œå½“ JVM è®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šå»è¯•å›¾å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼Œå³JVM ä¼šç¡®ä¿åœ¨æŠ›å‡º OutOfMemoryError ä¹‹å‰ï¼Œæ¸…ç†è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚å½“ç„¶ï¼Œå¦‚æœå†…å­˜å……è¶³ï¼Œé‚£ä¹ˆæ˜¯ä¸ä¼šè½»æ˜“è¢«å›æ”¶çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªè½¯å¼•ç”¨ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //å¼ºå¼•ç”¨å†™æ³•ï¼šObject obj = new Object();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //è½¯å¼•ç”¨å†™æ³•ï¼š</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        SoftReference</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">reference</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SoftReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //ä½¿ç”¨getæ–¹æ³•å°±å¯ä»¥è·å–åˆ°è½¯å¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡äº†</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">reference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°è½¯å¼•ç”¨è¿˜å­˜åœ¨ä¸€ä¸ªå¸¦é˜Ÿåˆ—çš„æ„é€ æ–¹æ³•ï¼Œè½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æ¥è¿›è¡Œä¸€ä¸ªæµ‹è¯•ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦è®¾å®šä¸€ä¸‹å‚æ•°ï¼Œæ¥é™åˆ¶æœ€å¤§å †å†…å­˜ä¸º10Mï¼Œå¹¶ä¸”æ‰“å°GCæ—¥å¿—ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>-XX:+PrintGCDetails -Xms10M -Xmx10M</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ¥ç€è¿è¡Œä»¥ä¸‹ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ReferenceQueue</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">queue</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ReferenceQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        SoftReference</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">reference</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SoftReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), queue);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(reference);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">list</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">list</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;lbwnb&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å‘ç”Ÿäº†å†…å­˜æº¢å‡ºï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è½¯å¼•ç”¨å¯¹è±¡ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">reference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">queue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">poll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>java.lang.ref.SoftReference@232204a1</span></span>
<span class="line"><span>[GC (Allocation Failure) [PSYoungGen: 3943K-&gt;501K(4608K)] 3943K-&gt;2362K(15872K), 0.0050615 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>[GC (Allocation Failure) [PSYoungGen: 3714K-&gt;496K(4608K)] 5574K-&gt;4829K(15872K), 0.0049642 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>[GC (Allocation Failure) [PSYoungGen: 3318K-&gt;512K(4608K)] 7652K-&gt;7711K(15872K), 0.0059440 secs] [Times: user=0.03 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span>[GC (Allocation Failure) --[PSYoungGen: 4608K-&gt;4608K(4608K)] 11807K-&gt;15870K(15872K), 0.0078912 secs] [Times: user=0.05 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>[Full GC (Ergonomics) [PSYoungGen: 4608K-&gt;0K(4608K)] [ParOldGen: 11262K-&gt;10104K(11264K)] 15870K-&gt;10104K(15872K), [Metaspace: 3207K-&gt;3207K(1056768K)], 0.0587856 secs] [Times: user=0.24 sys=0.00, real=0.06 secs] </span></span>
<span class="line"><span>[Full GC (Ergonomics) [PSYoungGen: 4096K-&gt;1535K(4608K)] [ParOldGen: 10104K-&gt;11242K(11264K)] 14200K-&gt;12777K(15872K), [Metaspace: 3207K-&gt;3207K(1056768K)], 0.0608198 secs] [Times: user=0.25 sys=0.01, real=0.06 secs] </span></span>
<span class="line"><span>[Full GC (Ergonomics) [PSYoungGen: 3965K-&gt;3896K(4608K)] [ParOldGen: 11242K-&gt;11242K(11264K)] 15207K-&gt;15138K(15872K), [Metaspace: 3207K-&gt;3207K(1056768K)], 0.0972088 secs] [Times: user=0.58 sys=0.00, real=0.10 secs] </span></span>
<span class="line"><span>[Full GC (Allocation Failure) [PSYoungGen: 3896K-&gt;3896K(4608K)] [ParOldGen: 11242K-&gt;11225K(11264K)] 15138K-&gt;15121K(15872K), [Metaspace: 3207K-&gt;3207K(1056768K)], 0.1028222 secs] [Times: user=0.63 sys=0.01, real=0.10 secs] </span></span>
<span class="line"><span>å‘ç”Ÿäº†å†…å­˜æº¢å‡ºï¼Java heap space</span></span>
<span class="line"><span>è½¯å¼•ç”¨å¯¹è±¡ï¼šnull</span></span>
<span class="line"><span>java.lang.ref.SoftReference@232204a1</span></span>
<span class="line"><span>Heap</span></span>
<span class="line"><span> PSYoungGen      total 4608K, used 4048K [0x00000007bfb00000, 0x00000007c0000000, 0x00000007c0000000)</span></span>
<span class="line"><span>  eden space 4096K, 98% used [0x00000007bfb00000,0x00000007bfef40a8,0x00000007bff00000)</span></span>
<span class="line"><span>  from space 512K, 0% used [0x00000007bff00000,0x00000007bff00000,0x00000007bff80000)</span></span>
<span class="line"><span>  to   space 512K, 0% used [0x00000007bff80000,0x00000007bff80000,0x00000007c0000000)</span></span>
<span class="line"><span> ParOldGen       total 11264K, used 11225K [0x00000007bf000000, 0x00000007bfb00000, 0x00000007bfb00000)</span></span>
<span class="line"><span>  object space 11264K, 99% used [0x00000007bf000000,0x00000007bfaf64a8,0x00000007bfb00000)</span></span>
<span class="line"><span> Metaspace       used 3216K, capacity 4500K, committed 4864K, reserved 1056768K</span></span>
<span class="line"><span>  class space    used 352K, capacity 388K, committed 512K, reserved 1048576K</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“å†…å­˜ä¸è¶³æ—¶ï¼Œè½¯å¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡è¢«å›æ”¶äº†ï¼Œæ‰€ä»¥<code>get()</code>æ–¹æ³•å¾—åˆ°çš„ç»“æœä¸ºnullï¼Œå¹¶ä¸”è½¯å¼•ç”¨å¯¹è±¡æœ¬èº«è¢«ä¸¢è¿›äº†é˜Ÿåˆ—ä¸­ã€‚</p><h4 id="å¼±å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#å¼±å¼•ç”¨"><span>å¼±å¼•ç”¨</span></a></h4><p>å¼±å¼•ç”¨æ¯”è½¯å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸè¿˜è¦çŸ­ï¼Œåœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ªå¼±å¼•ç”¨ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        WeakReference</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">reference</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WeakReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">reference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨æ–¹æ³•å’Œè½¯å¼•ç”¨æ˜¯å·®ä¸å¤šçš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨è¿™ä¹‹å‰æ‰‹åŠ¨è¿›è¡Œä¸€æ¬¡GCï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        SoftReference</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">softReference</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SoftReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        WeakReference</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">weakReference</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WeakReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //æ‰‹åŠ¨GC</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è½¯å¼•ç”¨å¯¹è±¡ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">softReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼±å¼•ç”¨å¯¹è±¡ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">weakReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå¼±å¼•ç”¨å¯¹è±¡ç›´æ¥å°±è¢«å›æ”¶äº†ï¼Œè€Œè½¯å¼•ç”¨å¯¹è±¡æ²¡æœ‰è¢«å›æ”¶ã€‚åŒæ ·çš„ï¼Œå®ƒä¹Ÿæ”¯æŒReferenceQueueï¼Œå’Œè½¯å¼•ç”¨ç”¨æ³•ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å¤šåšä»‹ç»äº†ã€‚</p><p><code>WeakHashMap</code>æ­£æ˜¯ä¸€ç§ç±»ä¼¼äºå¼±å¼•ç”¨çš„HashMapç±»ï¼Œå¦‚æœMapä¸­çš„Keyæ²¡æœ‰å…¶ä»–å¼•ç”¨é‚£ä¹ˆæ­¤Mapä¼šè‡ªåŠ¨ä¸¢å¼ƒæ­¤é”®å€¼å¯¹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Integer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        WeakHashMap</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">weakHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WeakHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        weakHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(a, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;yyds&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(weakHashMap);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(weakHashMap);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“å˜é‡açš„å¼•ç”¨æ–­å¼€åï¼Œè¿™æ—¶åªæœ‰WeakHashMapæœ¬èº«å¯¹æ­¤å¯¹è±¡å­˜åœ¨å¼•ç”¨ï¼Œæ‰€ä»¥åœ¨GCä¹‹åï¼Œè¿™ä¸ªé”®å€¼å¯¹å°±è‡ªåŠ¨è¢«èˆå¼ƒäº†ã€‚æ‰€ä»¥è¯´è¿™ç©æ„ï¼Œå°±æŒºé€‚åˆæ‹¿å»åšç¼“å­˜çš„ã€‚</p><h4 id="è™šå¼•ç”¨-é¬¼å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#è™šå¼•ç”¨-é¬¼å¼•ç”¨"><span>è™šå¼•ç”¨ï¼ˆé¬¼å¼•ç”¨ï¼‰</span></a></h4><p>è™šå¼•ç”¨ç›¸å½“äºæ²¡æœ‰å¼•ç”¨ï¼Œéšæ—¶éƒ½æœ‰å¯èƒ½ä¼šè¢«å›æ”¶ã€‚</p><p>çœ‹çœ‹å®ƒçš„æºç ï¼Œéå¸¸ç®€å•ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PhantomReference</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Reference</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Returns this reference object&#39;s referent.  Because the referent of a</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * phantom reference is always inaccessible, this method always returns</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * &lt;code&gt;null&lt;/code&gt;.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  &lt;code&gt;null&lt;/code&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Creates a new phantom reference that refers to the given object and</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * is registered with the given queue.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * &lt;p&gt; It is possible to create a phantom reference with a &lt;tt&gt;null&lt;/tt&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * queue, but such a reference is completely useless: Its &lt;tt&gt;get&lt;/tt&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * method will always return null and, since it does not have a queue, it</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * will never be enqueued.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> referent</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> the object the new phantom reference will refer to</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> q</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> the queue with which the reference is to be registered,</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *          or &lt;tt&gt;null&lt;/tt&gt; if registration is not required</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> PhantomReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> referent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ReferenceQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> super</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">q</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        super</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(referent, q);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡<code>get()</code>æ–¹æ³•å¾—åˆ°çš„æ°¸è¿œéƒ½æ˜¯<code>null</code>ï¼Œå› ä¸ºè™šå¼•ç”¨æœ¬èº«å°±ä¸ç®—æ˜¯ä¸ªå¼•ç”¨ï¼Œç›¸å½“äºè¿™ä¸ªå¯¹è±¡ä¸å­˜åœ¨ä»»ä½•å¼•ç”¨ï¼Œå¹¶ä¸”åªèƒ½ä½¿ç”¨å¸¦é˜Ÿåˆ—çš„æ„é€ æ–¹æ³•ï¼Œä»¥ä¾¿å¯¹è±¡è¢«å›æ”¶æ—¶æ¥åˆ°é€šçŸ¥ã€‚</p><p>æœ€åï¼ŒJavaä¸­4ç§å¼•ç”¨çš„çº§åˆ«ç”±é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼š <strong>å¼ºå¼•ç”¨ &gt; è½¯å¼•ç”¨ &gt; å¼±å¼•ç”¨ &gt; è™šå¼•ç”¨</strong></p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºæŸç çŸ¥è¯†åº“ç‰ˆæƒæ‰€æœ‰ï¼Œç¦æ­¢ä¸€åˆ‡æœªç»æˆæƒçš„è½¬è½½ã€å‘å¸ƒã€å‡ºå”®ç­‰è¡Œä¸ºï¼Œè¿è€…å°†è¢«è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚ åŸæ–‡é“¾æ¥ï¼šhttps://www.itbaima.cn/document/ydd7n3jg8unc3clg</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/doc/è™šæ‹Ÿæœº/å†…å­˜ç®¡ç†.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: aruixrain@gmail.com">æ˜¥æ±ŸèŠ±æœç§‹æœˆå¤œ</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/doc/%E8%99%9A%E6%8B%9F%E6%9C%BA/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.html" aria-label="èµ°è¿›JVM"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->èµ°è¿›JVM</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">é»˜è®¤é¡µè„š</div><div class="vp-copyright">Copyright Â© 2024 Cotton Eye Joe </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-7V2lPg4G.js" defer></script>
  </body>
</html>
